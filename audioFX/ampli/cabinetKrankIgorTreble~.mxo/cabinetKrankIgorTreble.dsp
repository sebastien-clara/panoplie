declare name "cabinetKrankIgorTreble";
declare description "Generated by tools/physicalModeling/ir2dsp.py";

import("stdfaust.lib");

pi = 4*atan(1.0);
nModes = 112;

modeFrequencies=(123.946037099,446.205733558,644.519392917,818.043844857,917.200674536,966.779089376,1065.93591906,1189.88195616,1338.61720067,1512.14165261,1710.45531197,1760.03372681,1859.19055649,2032.71500843,2131.87183811,2478.92074199,2726.81281619,2776.39123103,2825.96964587,2999.49409781,3173.01854975,3222.59696459,3296.96458685,3346.54300169,3396.12141653,3445.69983137,3495.27824621,3767.95952782,3891.90556492,4065.43001686,4238.9544688,4288.53288364,4338.11129848,4387.68971332,4561.21416526,4685.16020236,4809.10623946,4858.6846543,4908.26306914,4957.84148398,5032.20910624,5081.78752108,5131.36593592,5180.94435076,5230.5227656,5304.89038786,5354.4688027,5527.99325464,5577.57166948,5627.15008432,5701.51770658,5751.09612142,5800.67453626,5850.2529511,5924.62057336,5974.1989882,6023.77740304,6147.72344013,6197.30185497,6246.88026981,6321.24789207,6370.82630691,6420.40472175,6569.13996627,6618.71838111,6742.66441821,6792.24283305,6916.18887015,7511.12984823,7585.49747049,7684.65430017,7858.17875211,7907.75716695,8031.70320405,8081.28161889,8180.43844857,8279.59527825,8353.96290051,8403.54131535,8453.11973019,8502.69814503,8626.64418212,8800.16863406,8973.693086,9122.42833052,9172.00674536,9295.95278246,9370.32040472,9692.58010118,9766.94772344,9816.52613828,9866.10455312,9915.68296796,9990.05059022,10039.6290051,10188.3642496,10337.0994941,10510.623946,10560.2023609,10609.7807757,10708.9376054,10758.5160202,11155.143339,11254.3001686,11452.613828,11551.7706577,11774.8735245,11874.0303541,11923.608769,12196.2900506,12865.5986509,15592.4114671);
massEigenValues=(1.0,0.193042235876,0.395454815838,0.166697963881,0.21910698452,0.265830545771,0.29732858212,0.228296777542,0.177856194295,0.133547615777,0.250421747302,0.222420814723,0.280827382407,0.584598752614,0.750136988968,0.638366081331,0.554252233849,0.550601425957,0.553005293629,0.183848291163,0.446412690726,0.376133091632,0.339013879771,0.336992371918,0.308085068757,0.382756184031,0.378728477506,0.26210982535,0.329636872768,0.249161552833,0.21408845121,0.195768955199,0.183988684289,0.208733199761,0.222486138212,0.24198181906,0.266085599192,0.278966171809,0.290424218948,0.263185830455,0.242333026419,0.220565495693,0.248366139375,0.254512771252,0.252827248981,0.2564791236,0.241306446276,0.150601831882,0.137630331244,0.116605712539,0.109491652116,0.102402956303,0.0922652111346,0.0828600002552,0.0737032387449,0.0676899468777,0.0582875612091,0.0399180038129,0.0363609003851,0.0304232432514,0.0224369173616,0.0204093956772,0.0149549753288,0.0176375086427,0.0217638785599,0.0398883678606,0.0379318678911,0.0253269279209,0.0106140011441,0.0111383113091,0.0125856755685,0.0252726306345,0.0268700377898,0.0338403343467,0.0373031408995,0.0452668898271,0.0494491726728,0.0521997784212,0.052231614652,0.0482200396051,0.0464508495326,0.0449151812981,0.0375217409961,0.034877405802,0.0432449746672,0.0434098410861,0.043837816132,0.0412112916335,0.0226676277272,0.0221568030855,0.0222224466234,0.0222124193513,0.021701423425,0.0212084669818,0.0206839283223,0.0220304138115,0.023640132886,0.0256109737705,0.0256302952121,0.0253181269417,0.0207227775506,0.0197547934738,0.0242504346969,0.0249839072744,0.0223209954086,0.0214605727572,0.0325331201338,0.0381885298152,0.0396414712514,0.0541103324,0.033407629697,0.0214827596525);
t60=(18.1748750332,3.02921112677,27.2622733777,5.45251735161,2.59647787239,7.78927692575,13.6311758612,3.20739540799,2.47845971212,1.88022972733,1.00978927384,0.349593671458,1.18539117391,3.89467763559,5.45251735161,4.95684107833,5.45251735161,5.45251735161,5.45251735161,0.340855788585,4.95684107833,2.37070400056,2.27192793164,2.27192793164,2.09717027125,2.37070400056,2.37070400056,2.18105394823,3.63503768294,1.06918403415,0.349593671458,0.345169426964,0.340855788585,0.349593671458,0.349593671458,1.39813962987,1.47371050999,1.47371050999,1.55791806214,1.43493071624,1.39813962987,0.349593671458,1.39813962987,1.43493071624,1.43493071624,1.43493071624,1.39813962987,0.332544143908,0.324628291842,0.317080618948,0.313436914796,0.268671406799,0.252506084561,0.227263312284,0.225385750717,0.22353896885,0.222626884744,0.217306999769,0.217306999769,0.213899491752,0.212235514103,0.212235514103,0.210597234952,2.86978308568,3.02921112677,7.78927692575,6.05834390785,3.40785272437,0.219934765532,6.05834390785,0.229172429508,0.439791172434,0.446999579295,0.768027503189,0.813875213836,0.879503993217,1.65233259032,2.01950019997,2.01950019997,1.65233259032,0.893920807052,0.879503993217,0.813875213836,0.778998205378,0.865544856012,0.865544856012,0.865544856012,0.826205469353,0.432811603888,0.429404255465,0.432811603888,0.432811603888,0.426050146862,0.426050146862,0.426050146862,0.426050146862,0.436273469886,0.443366073397,0.443366073397,0.439791172434,0.426050146862,0.422748039943,0.59273476188,0.599247469686,0.562185462389,0.55082976319,0.852021941848,0.940154037634,0.973728169372,2.18105394823,0.879503993217,2.7262978487);

modeFreqs=par(i,nModes,ba.take(i+1, modeFrequencies));
modeGains=par(i,nModes,ba.take(i+1, massEigenValues));
modeT60 = par(i,nModes,ba.take(i+1,t60));

cabinetKrankIgorTreble=modalModel(nModes,modeFrequencies,modeT60,modeGains);

modalModel(n,modeFreqs,modeRes,modeGains) = _ <: par(i,n,gain(i)*pm.modeFilter(freqs(i),res(i))) :> _
with {
	freqs(i) = ba.take(i+1,modeFreqs);
	res(i) = ba.take(i+1,modeRes);
	gain(i) = ba.take(i+1,modeGains);
};


cab = cabinetKrankIgorTreble;

wetdry = vslider("[2] amount[style:knob]",  1, 0, 1, 0.01);
dry = 1 - wetdry;

process = _ <: _*dry, (_*wetdry:cab) :> _;
