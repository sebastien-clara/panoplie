declare name "cabinetAmpegManateeBass";
declare description "Generated by tools/physicalModeling/ir2dsp.py";

import("stdfaust.lib");

pi = 4*atan(1.0);
nModes = 90;

modeFrequencies=(153.277060576,569.314796425,744.48857994,875.868917577,1007.24925521,1160.52631579,1423.28699106,1510.87388282,1817.42800397,2102.08540218,2211.56901688,2474.32969215,2583.81330685,2715.19364449,2846.57398213,3196.92154916,3350.19860973,3481.57894737,3591.06256207,3722.4428997,3853.82323734,3985.20357498,4094.68718967,4226.06752731,4357.44786495,4488.82820258,4598.31181728,4729.69215492,4861.07249255,4992.45283019,5123.83316783,5255.21350546,5386.5938431,5496.0774578,5627.45779543,5977.80536246,6218.6693148,6393.84309831,6985.05461768,7116.43495531,7247.81529295,7357.29890765,7466.78252234,7598.16285998,7729.54319762,7860.92353525,7970.40714995,8079.89076465,8211.27110228,8320.75471698,8583.51539225,8714.89572989,8824.37934459,8955.75968222,9087.14001986,9196.62363456,9328.00397219,9459.38430983,9568.86792453,9678.35153923,9831.6285998,9963.00893744,10094.3892751,10203.8728898,10466.633565,10598.0139027,10707.4975174,10816.9811321,10948.3614697,11079.7418073,11211.122145,11846.1271102,12218.3714002,12349.7517378,12481.1320755,12612.5124131,12721.9960278,12853.3763654,13006.653426,13116.1370407,13247.5173784,13357.000993,13488.3813307,13619.7616683,13751.142006,13860.6256207,13992.0059583,14123.3862959,14254.7666336,14386.1469712);
massEigenValues=(1.0,0.36615984745,0.22744022957,0.188193971069,0.233945855568,0.298263832859,0.270413027029,0.269736027507,0.16889224272,0.285488338352,0.310266379364,0.282672629981,0.316300774299,0.329920510747,0.37277587059,0.342210764576,0.300978806334,0.358814177357,0.325382515504,0.24078807851,0.225567421217,0.227186489751,0.204157898051,0.279251999862,0.293670790931,0.258314792512,0.254582779596,0.217196527908,0.234460779487,0.254693595283,0.225015533134,0.227862600329,0.268257577062,0.2744148369,0.208748171036,0.336393287759,0.19194060367,0.170375918049,0.0144125466502,0.0240144866209,0.02944645799,0.0313381863625,0.0278278039862,0.0239621534636,0.0202053097614,0.0248110261358,0.0285105003133,0.0261939524762,0.0205163461547,0.0177166564061,0.0300696571557,0.0269533644655,0.0229198851123,0.0196576134443,0.0190134814152,0.0212616275651,0.0262913260979,0.0344396343269,0.034496896504,0.0295949908249,0.0320129040717,0.0373821051527,0.0452453664689,0.0481135426095,0.0355972495768,0.0370317835782,0.0343264001846,0.0328933401625,0.0305095276699,0.0228294454812,0.0136042981234,0.0542443736176,0.0295397608255,0.0250663293893,0.021254265409,0.0188838361044,0.0167879562789,0.0171200295623,0.0194172760177,0.0202583393891,0.0209480113163,0.0181204945192,0.0158907211585,0.0143150036969,0.0135222877969,0.0136232560177,0.0136590084288,0.0143334583207,0.014308054188,0.0122246380306);
t60=(4.81630922527,5.35144598969,0.175853205952,0.175853205952,0.283386050727,3.21089893209,2.67576216776,2.67576216776,0.175853205952,1.04708505971,1.07035187551,1.04708505971,1.09467627385,1.85247483815,2.09409177181,4.81630922527,1.50515049608,2.83315533373,1.72016080306,1.41661684028,4.01360407866,4.01360407866,0.301092781479,2.00684121243,2.09409177181,0.688111330526,0.47225784706,0.391641836089,0.467673580131,0.47225784706,0.418881034789,0.467673580131,1.72016080306,1.72016080306,0.302985953952,3.01022264546,0.301092781479,0.299223126677,0.244557077922,0.875756688857,2.29352162184,2.29352162184,2.18927420023,0.875756688857,0.776889779591,0.875756688857,2.83315533373,2.18927420023,0.776889779591,0.247064551938,3.01022264546,2.18927420023,1.7838675607,0.379309128033,0.379309128033,0.496596996232,0.535215112958,0.60972782653,0.60972782653,0.566693745949,0.602107208091,0.860119575652,1.23500934124,2.18927420023,0.642242465214,0.845031133088,0.60972782653,0.60972782653,0.573439167308,0.52358170512,0.140493253708,2.67576216776,1.02480832117,0.891972954404,0.718918777394,0.467673580131,0.437917520269,0.437917520269,0.467673580131,0.47225784706,1.45954224916,0.446025652979,0.346569780804,0.140493253708,0.140493253708,0.140493253708,0.140493253708,0.329957178282,0.140493253708,0.13847579854);

modeFreqs=par(i,nModes,ba.take(i+1, modeFrequencies));
modeGains=par(i,nModes,ba.take(i+1, massEigenValues));
modeT60 = par(i,nModes,ba.take(i+1,t60));

cabinetAmpegManateeBass=modalModel(nModes,modeFrequencies,modeT60,modeGains);

modalModel(n,modeFreqs,modeRes,modeGains) = _ <: par(i,n,gain(i)*pm.modeFilter(freqs(i),res(i))) :> _
with {
	freqs(i) = ba.take(i+1,modeFreqs);
	res(i) = ba.take(i+1,modeRes);
	gain(i) = ba.take(i+1,modeGains);
};


cab = cabinetAmpegManateeBass;

wetdry = vslider("[2] amount[style:knob]",  1, 0, 1, 0.01);
dry = 1 - wetdry;

process = _ <: _*dry, (_*wetdry:cab) :> _;
