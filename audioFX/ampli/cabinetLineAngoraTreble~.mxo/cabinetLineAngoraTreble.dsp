declare name "cabinetLineAngoraTreble";
declare description "Generated by tools/physicalModeling/ir2dsp.py";

import("stdfaust.lib");

pi = 4*atan(1.0);
nModes = 87;

modeFrequencies=(152.595155709,305.190311419,396.747404844,457.785467128,549.342560554,671.418685121,824.01384083,1007.12802768,1190.24221453,1281.79930796,1434.39446367,1525.95155709,1586.98961938,1648.02768166,1739.58477509,1800.62283737,2014.25605536,2105.81314879,2166.85121107,2288.92733564,2380.48442907,2472.04152249,2716.19377163,2838.26989619,3051.90311419,3235.01730104,3326.57439446,3387.61245675,3540.20761246,3692.80276817,3814.87889273,3906.43598616,3997.99307958,4089.55017301,4272.66435986,4364.22145329,4455.77854671,4547.33564014,4730.44982699,5066.15916955,5401.86851211,5462.90657439,5584.98269896,5676.53979239,5768.09688581,6042.76816609,6103.80622837,6164.84429066,6256.40138408,6317.43944637,6500.55363322,6744.70588235,7080.41522491,7171.97231834,7660.27681661,7782.35294118,7873.9100346,8057.02422145,8148.58131488,8270.65743945,8362.21453287,8545.32871972,8636.88581315,8942.07612457,9094.67128028,9155.70934256,9247.26643599,9338.82352941,9430.38062284,9491.41868512,9582.97577855,9674.53287197,9796.60899654,10223.8754325,10315.432526,10712.1799308,10773.2179931,11841.384083,11932.9411765,11993.9792388,12085.5363322,12146.5743945,12573.8408304,12665.3979239,12726.4359862,13611.4878893,13672.5259516);
massEigenValues=(1.0,0.30312031159,0.26933536686,0.234549878442,0.188701260592,0.356989313089,0.177257664845,0.183527763507,0.210628109778,0.220336804522,0.17830758767,0.155603464399,0.161137859145,0.186126993477,0.201537626182,0.185749868643,0.323397876033,0.34927189487,0.417793699122,0.397676836824,0.439899568261,0.42452928625,0.345456785106,0.268343626682,0.414377297574,0.535181128168,0.601463699445,0.527275165103,0.364287167206,0.38347589236,0.319629062526,0.320785280475,0.338884120511,0.319408114414,0.17331435758,0.170542891753,0.190247653017,0.218789891056,0.301897911226,0.466065604526,0.304374627047,0.304597214824,0.25156020447,0.216414756756,0.182535626116,0.0878538598192,0.0924675298076,0.09170479001,0.0892576961739,0.09001994143,0.123233765189,0.0944367356187,0.0434519057532,0.0435703521557,0.0515974404754,0.0479013144108,0.0407930797167,0.0294614510223,0.027562855578,0.0243307529483,0.0229205521437,0.0326412815997,0.0328025373155,0.0370854366079,0.0429134233798,0.0406013842404,0.0456927414526,0.0502594958567,0.0523500112807,0.0495973821466,0.0436920151603,0.0372783002923,0.0355727095949,0.0633874599473,0.0632144958392,0.0319195235804,0.032918728852,0.0197248143243,0.0196747066465,0.019310272842,0.0185530190599,0.0178799300219,0.0251969975164,0.0245329097169,0.0236257720433,0.0110581069293,0.0112898016104);
t60=(33.5637080768,4.79488259259,4.79488259259,3.94874066665,3.72937053771,16.7818932111,7.45866272992,22.3758314997,16.7818932111,16.7818932111,0.438818607275,0.435969644591,0.438818607275,0.441705056309,0.476158203329,0.441705056309,3.19661451031,3.35644131852,4.19553206172,4.19553206172,5.59401663378,4.19553206172,11.1879549223,2.0342377234,2.39748046927,4.47522897612,5.59401663378,4.19553206172,1.72129012701,2.39748046927,1.63732857677,1.63732857677,1.63732857677,1.63732857677,0.438818607275,0.438818607275,0.441705056309,1.37002241688,1.91800004473,4.79488259259,1.91800004473,1.91800004473,1.5256978793,1.37002241688,0.438818607275,0.299753616966,0.301097452207,0.299753616966,0.299753616966,0.299753616966,4.79488259259,0.302453394072,0.284515891969,0.284515891969,4.79488259259,4.19553206172,3.5330920013,0.245068351069,0.184493903746,0.1839886557,0.1839886557,0.771656042321,0.771656042321,0.818703462595,0.959039196302,0.849790492203,1.11886600425,2.79704748977,3.19661451031,2.68516872403,0.972937179598,0.818703462595,0.79921238848,3.72937053771,3.72937053771,0.771656042321,0.771656042321,1.59834642845,1.59834642845,1.59834642845,1.59834642845,1.5611774033,3.5330920013,3.05131741193,1.76658517385,3.19661451031,5.59401663378);

modeFreqs=par(i,nModes,ba.take(i+1, modeFrequencies));
modeGains=par(i,nModes,ba.take(i+1, massEigenValues));
modeT60 = par(i,nModes,ba.take(i+1,t60));

cabinetLineAngoraTreble=modalModel(nModes,modeFrequencies,modeT60,modeGains);

modalModel(n,modeFreqs,modeRes,modeGains) = _ <: par(i,n,gain(i)*pm.modeFilter(freqs(i),res(i))) :> _
with {
	freqs(i) = ba.take(i+1,modeFreqs);
	res(i) = ba.take(i+1,modeRes);
	gain(i) = ba.take(i+1,modeGains);
};


cab = cabinetLineAngoraTreble;

wetdry = vslider("[2] amount[style:knob]",  1, 0, 1, 0.01);
dry = 1 - wetdry;

process = _ <: _*dry, (_*wetdry:cab) :> _;
