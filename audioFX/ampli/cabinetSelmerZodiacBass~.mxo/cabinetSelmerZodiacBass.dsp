declare name "cabinetSelmerZodiacBass";
declare description "Generated by tools/physicalModeling/ir2dsp.py";

import("stdfaust.lib");

pi = 4*atan(1.0);
nModes = 135;

modeFrequencies=(77.767980854,99.9874039552,133.316538607,166.645673259,249.968509888,327.736490742,455.498173573,588.81471218,683.24726036,838.783222068,877.667212495,938.770626023,1083.19687618,1210.95855901,1344.27509762,1388.71394382,1488.70134778,1572.02418441,1638.68245371,1760.88928077,1849.76697317,2021.9675022,2094.18062728,2305.26514674,2405.2525507,2477.46567578,2538.56908931,2577.45307973,2716.32447412,2844.08615695,2888.52500315,3038.50610908,3155.15808036,3310.69404207,3355.13288827,3432.90086913,3588.43683084,3732.86308099,3860.62476382,4010.60586976,4138.36755259,4260.57437964,4393.89091825,4538.31716841,4671.63370702,4804.95024562,4943.82164001,4988.26048621,5021.58962086,5082.69303439,5171.57072679,5221.56442877,5277.11298652,5432.64894823,5543.74606374,5577.07519839,5715.94659277,5832.59856405,6004.79909308,6110.34135282,6165.88991057,6288.09673762,6415.85842046,6521.40068019,6549.17495906,6626.94293992,6721.3754881,6771.36919007,6854.6920267,6988.00856531,7038.00226729,7087.99596927,7476.83587354,7610.15241214,7693.47524877,7704.58496032,7743.46895075,7810.12722005,7860.12092203,7926.77919133,8026.76659529,8126.75399924,8171.19284545,8193.41226855,8293.3996725,8404.49678801,8443.38077844,8515.59390351,8571.14246127,8637.80073057,8671.12986522,8765.5624134,8837.77553848,8893.32409623,8971.09207709,9037.75034639,9298.82856783,9371.04169291,9421.03539489,9526.57765462,9648.78448167,9737.66217408,9793.21073183,9843.20443381,9854.31414536,9898.75299156,9926.52727044,10026.5146744,10093.1729437,10104.2826552,10159.831213,10237.5991939,10259.818617,10270.9283285,10454.2385691,10465.3482806,10576.4453961,10643.1036654,10709.7619348,10737.5362136,10759.7556367,10854.1881849,11004.1692908,11176.3698199,11304.1315027,11448.5577529,11537.4354453,11592.984003,11687.4165512,11804.0685225,12031.8176093,12148.4695806,12159.5792921,12259.5666961,12387.3283789);
massEigenValues=(0.133751749771,0.178320527187,0.18342710518,0.203022308116,0.295099266368,0.214586737144,0.348202498552,0.514538052109,0.354455747924,0.273746759635,0.271590564861,0.222413514147,0.116105103473,0.132008989137,0.330315618695,0.286048512869,0.299482176631,0.326902917171,0.276904562207,0.553705310921,0.492956753121,0.468186693976,0.368161053243,0.714910709869,1.0,0.926284629179,0.86855330131,0.82486455498,0.829740513719,0.655325863172,0.678432805864,0.602114486171,0.553070214801,0.43032713765,0.429679884948,0.603019797934,0.538640565728,0.640366960063,0.667031443904,0.395817223865,0.65157663573,0.686117554809,0.744770450392,0.49872043746,0.487611863606,0.391672218914,0.247810279659,0.22521753268,0.219326115483,0.217084117181,0.270847102917,0.272059794666,0.266781816405,0.199093361168,0.244366306403,0.253520215273,0.315959782916,0.195580879557,0.139188351558,0.101582567751,0.0978169375448,0.0542690564564,0.0752217723625,0.0881746719091,0.0855414963664,0.0891310181039,0.0718706503256,0.0643023624422,0.0489833326557,0.0258063105624,0.0214694476382,0.0255308053211,0.0105905332266,0.0173554315134,0.0163853506272,0.0161899866922,0.0162052851766,0.0182779501619,0.0176912872183,0.015665714686,0.0268373648007,0.0384424342354,0.0362732010586,0.0366689449935,0.0428670584158,0.0367472905351,0.03519333546,0.036716118796,0.0355260703983,0.0352216663475,0.034392926008,0.0410836920621,0.0392409754031,0.0446191449543,0.0403389382611,0.0390820022551,0.01497342999,0.0178110336851,0.0178803186551,0.0273679059461,0.035158759962,0.039513305562,0.042652753532,0.0438350820096,0.0438169396936,0.0451651126399,0.0464491719654,0.0413046599272,0.035747308048,0.0357860710543,0.0328114507259,0.0215355593653,0.0222109367543,0.0221558392151,0.0312170283154,0.0311235576489,0.0394456093012,0.037919792017,0.0391255036282,0.0387058993974,0.0384638812202,0.0360354633066,0.0302338350462,0.0280694871609,0.0288574133795,0.0252644440287,0.0197561444327,0.0215450029969,0.0156832165393,0.0108561442528,0.0114780082851,0.015154854521,0.0151128611159,0.0159759448192,0.0124139606139);
t60=(0.070296900655,0.0741270006123,0.555443060688,0.610979531587,0.581888999203,0.0879778188202,0.197143252978,0.872794323539,0.200373824908,0.112170323211,0.0905822463244,0.0879778188202,0.0624152329582,0.0163909182537,0.112170323211,0.109167860492,0.110150648586,0.112170323211,0.10820246688,0.436436337622,0.394208145712,0.0551145245097,0.0541404341589,0.0933457228774,0.160841826757,0.1328829652,0.128689136067,0.124752072014,0.124752072014,0.0855190935915,0.0879778188202,0.0719491006169,0.678857440537,0.0873499657672,0.0873499657672,0.222224238814,0.10450591701,0.277760708206,0.290983677212,0.0861207886704,0.177151163056,0.182436918149,0.271589989347,0.130057335639,0.581888999203,0.0826325834499,0.0168614661264,0.0168384443466,0.0168384443466,0.0168154856406,0.260036302995,0.260036302995,0.254620512528,0.939926321566,0.177151163056,0.182436918149,0.555443060688,0.162985339515,0.555443060688,0.011115588463,0.011115588463,0.939926321566,0.15875398966,0.172163197002,0.167448544174,0.172163197002,0.156719686852,0.135834178312,0.128689136067,0.00963882759044,0.00963135295812,0.00963882759044,0.939926321566,0.0163258425001,0.0162827463578,0.0162827463578,0.0162827463578,0.0163474766494,0.0163474766494,0.0162827463578,0.0539022755086,0.0602656873902,0.0571719490641,0.0577105673004,0.0633841991211,0.0577105673004,0.0566433052457,0.0577105673004,0.0566433052457,0.0566433052457,0.05612436132,0.0624152329582,0.0608645657491,0.0647240042107,0.0620988023873,0.0608645657491,0.0162612839088,0.0163474766494,0.0163474766494,0.0769212874683,0.0955316760376,0.110150648586,0.115342736679,0.117559358926,0.117559358926,0.121048892983,0.134342356298,0.114265499704,0.0962832767358,0.0962832767358,0.092639152164,0.0285586581672,0.0291689475528,0.0291689475528,0.0933457228774,0.0933457228774,0.121048892983,0.100226100112,0.101895228693,0.101895228693,0.101053767176,0.0986108143979,0.092639152164,0.0769212874683,0.509162668329,0.0534321981769,0.0180726022185,0.0285586581672,0.0162827463578,0.0158436662822,0.142148401762,0.214429646696,0.214429646696,0.284218437251,0.147283463044);

modeFreqs=par(i,nModes,ba.take(i+1, modeFrequencies));
modeGains=par(i,nModes,ba.take(i+1, massEigenValues));
modeT60 = par(i,nModes,ba.take(i+1,t60));

cabinetSelmerZodiacBass=modalModel(nModes,modeFrequencies,modeT60,modeGains);

modalModel(n,modeFreqs,modeRes,modeGains) = _ <: par(i,n,gain(i)*pm.modeFilter(freqs(i),res(i))) :> _
with {
	freqs(i) = ba.take(i+1,modeFreqs);
	res(i) = ba.take(i+1,modeRes);
	gain(i) = ba.take(i+1,modeGains);
};


cab = cabinetSelmerZodiacBass;

wetdry = vslider("[2] amount[style:knob]",  1, 0, 1, 0.01);
dry = 1 - wetdry;

process = _ <: _*dry, (_*wetdry:cab) :> _;
