declare name "cabinetMarshallGreenBass";
declare description "Generated by tools/physicalModeling/ir2dsp.py";

import("stdfaust.lib");

pi = 4*atan(1.0);
nModes = 136;

modeFrequencies=(72.2131250787,122.206827056,161.090817483,177.755384809,227.749086787,333.291346517,477.717596675,583.259856405,633.253558383,716.576395012,799.899231641,877.667212495,944.325481799,1049.86774153,1066.53230886,1199.84884746,1344.27509762,1444.26250157,1599.79846328,1716.45043456,1899.76067515,2044.18692531,2133.06461771,2171.94860814,2271.93601209,2316.37485829,2338.5942814,2438.58168535,2616.33707016,2738.54389722,2882.97014737,3038.50610908,3171.82264769,3316.24889785,3427.34601335,3499.55913843,3560.66255196,3643.98538859,3710.64365789,3771.74707142,3843.9601965,3943.94760045,3993.94130243,4121.70298526,4143.92240836,4299.45837007,4427.2200529,4560.53659151,4699.40798589,4782.73082252,4849.38909183,4916.04736113,4954.93135156,4988.26048621,5049.36389974,5154.90615947,5310.44212117,5449.31351556,5610.40433304,5677.06260234,5760.38543897,5843.7082756,5893.70197758,5993.68938153,6065.90250661,6132.56077592,6276.98702607,6421.41327623,6582.50409371,6715.82063232,6865.80173825,6954.67943066,7021.33769996,7065.77654616,7154.65423857,7204.64794055,7221.31250787,7254.64164252,7354.62904648,7393.51303691,7521.27471974,7660.14611412,7749.02380652,7810.12722005,7876.78548936,7943.44375866,8026.76659529,8065.65058572,8132.30885502,8260.07053785,8376.72250913,8510.03904774,8637.80073057,8698.9041441,8710.01385565,8771.11726918,8859.99496158,8921.09837511,9009.97606751,9165.51202922,9309.93827938,9326.60284671,9343.26741403,9482.13880841,9626.56505857,9682.11361632,9770.99130873,9820.98501071,9954.30154931,10059.843809,10098.7277995,10193.1603477,10293.1477516,10343.1414536,10420.9094344,10498.6774153,10537.5614057,10615.3293866,10787.5299156,10798.6396272,10893.0721753,10926.40131,11087.4921275,11315.2412143,11404.1189067,11465.2223202,11520.7708779,11559.6548684,11648.5325608,11709.6359743,11776.2942436,11931.8302053,12092.9210228,13987.1268422,13998.2365537,14009.3462653);
massEigenValues=(0.123052884796,0.498315536885,0.611358959639,0.61849014589,0.690803145016,0.968170100874,1.0,0.496523218614,0.936549435352,0.828000066577,0.439588287974,0.590845353864,0.368850257232,0.30171714126,0.303114164722,0.703667791179,0.379765241719,0.394734095196,0.390460882299,0.728296431809,0.279269349644,0.367798935366,0.529757474119,0.523905354945,0.54949109602,0.495657220549,0.502664302678,0.56931723495,0.609135517046,0.618383983886,0.496143637842,0.564849532732,0.428390153623,0.447713436884,0.30622270879,0.272285494389,0.226376445695,0.420943122846,0.242370458912,0.283535122351,0.317969491043,0.38104511755,0.387406904899,0.310296920858,0.315570315747,0.232477214068,0.324405753678,0.175935660051,0.204088432342,0.180658543041,0.26008870795,0.128715114789,0.14768743944,0.156909114402,0.190344557183,0.205898288591,0.236038681858,0.184460718619,0.110598195794,0.108955271735,0.134253114742,0.0635321866437,0.0886425447369,0.0664771001847,0.0486939439063,0.0767648293095,0.0677552404125,0.0708055057411,0.066449332078,0.0577475272103,0.0440356409413,0.0305142526388,0.0358739939733,0.0335400130037,0.0257322543845,0.020092917866,0.0202060530078,0.0199657960868,0.0163201498478,0.0149902503442,0.0216136283104,0.0234946822961,0.01855987334,0.0219730668716,0.0166866868581,0.0195783342372,0.0186182874747,0.0203295791288,0.0202341883035,0.0270410664981,0.0351254818892,0.0433796414861,0.0384536073209,0.029959316293,0.0300556880661,0.0324854548265,0.0335435085779,0.0342875029357,0.0373916911819,0.0372012891033,0.0338959362766,0.0334764131203,0.0332039922192,0.0424637773841,0.0437325413689,0.0313633800205,0.031379702718,0.0350825700133,0.0354682642305,0.0254944239142,0.0270829577524,0.0240985686023,0.0305442704795,0.0285920009563,0.0350485129231,0.0334035129567,0.0355603853228,0.0414450315374,0.0420462241472,0.0421221925345,0.0439655585157,0.0449866789854,0.0435942722054,0.0231173145164,0.0237041244828,0.0213389850099,0.0199864887921,0.0213234289382,0.0225266851197,0.0229985693829,0.0261150259212,0.0214770222592,0.0100833570403,0.0111286893468,0.0111115694336,0.0110201695668);
t60=(4.07275290229,0.0794161865068,0.160841826757,0.160841826757,0.172163197002,0.678857440537,0.814613258605,0.0794161865068,1.22188071348,0.407345805406,0.0774076348716,0.188047950499,0.075966717416,0.872794323539,0.872794323539,0.470002336384,0.169773129941,0.172163197002,0.194015238893,0.509162668329,0.0227044048583,0.070702787926,0.610979531587,0.610979531587,0.555443060688,0.531296769015,0.531296769015,0.763704826809,0.555443060688,0.763704826809,0.678857440537,0.872794323539,0.939926321566,0.643132225291,0.239647444806,0.13891953749,0.0165448081019,0.872794323539,0.135834178312,0.152803653959,0.179755174754,0.436436337622,0.452597744427,0.177151163056,0.179755174754,0.718785622302,0.814613258605,1.11080777118,0.814613258605,0.290983677212,0.939926321566,0.152803653959,0.156719686852,0.15875398966,0.470002336384,0.763704826809,0.718785622302,0.763704826809,0.321605289754,0.313361009441,1.11080777118,0.143819813862,0.763704826809,0.145531021491,0.0365501132202,0.814613258605,0.763704826809,0.718785622302,0.939926321566,0.939926321566,0.763704826809,0.1328829652,0.150918156646,0.147283463044,0.00948427710603,0.00945540374694,0.00945540374694,0.00945540374694,0.763704826809,0.678857440537,0.872794323539,0.643132225291,0.0155247775969,0.239647444806,0.0154664167625,0.0155443297085,0.0155247775969,0.0167016292076,0.0167016292076,0.0213271777771,0.0398765187876,0.210733934924,0.13891953749,0.0349870423412,0.0350870669275,0.0374423861913,0.039491376167,0.039747304271,0.0732401910273,0.0732401910273,0.0396189260953,0.039491376167,0.0375569994801,0.21825734818,0.239647444806,0.0351876663687,0.0351876663687,0.039747304271,0.0400065778447,0.0183963329319,0.0213271777771,0.0178630647651,0.0608645657491,0.0558684437699,0.0657666751259,0.0647240042107,0.0657666751259,0.0804601048041,0.0809924340054,0.0809924340054,0.0826325834499,0.0905822463244,0.0820785284899,0.0167925897496,0.017837215216,0.0167469853842,0.0166790435579,0.0167469853842,0.0167925897496,0.0167925897496,0.0184514239551,0.0167469853842,0.814613258605,0.555443060688,0.555443060688,0.555443060688);

modeFreqs=par(i,nModes,ba.take(i+1, modeFrequencies));
modeGains=par(i,nModes,ba.take(i+1, massEigenValues));
modeT60 = par(i,nModes,ba.take(i+1,t60));

cabinetMarshallGreenBass=modalModel(nModes,modeFrequencies,modeT60,modeGains);

modalModel(n,modeFreqs,modeRes,modeGains) = _ <: par(i,n,gain(i)*pm.modeFilter(freqs(i),res(i))) :> _
with {
	freqs(i) = ba.take(i+1,modeFreqs);
	res(i) = ba.take(i+1,modeRes);
	gain(i) = ba.take(i+1,modeGains);
};


cab = cabinetMarshallGreenBass;

wetdry = vslider("[2] amount[style:knob]",  1, 0, 1, 0.01);
dry = 1 - wetdry;

process = _ <: _*dry, (_*wetdry:cab) :> _;
