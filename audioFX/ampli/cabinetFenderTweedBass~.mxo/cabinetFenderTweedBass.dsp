declare name "cabinetFenderTweedBass";
declare description "Generated by tools/physicalModeling/ir2dsp.py";

import("stdfaust.lib");

pi = 4*atan(1.0);
nModes = 180;

modeFrequencies=(27.7742788764,38.883990427,127.761682832,183.310240584,266.633077214,327.736490742,422.169038922,488.827308225,544.375865978,611.034135282,727.686106563,877.667212495,1088.75173196,1372.0493765,1566.46932863,1605.35331906,1683.12129991,1827.54755007,1983.08351178,2121.95490616,2166.39375236,2449.6913969,2510.79481043,2549.67880086,2621.89192594,2710.76961834,2860.75072427,3027.39639753,3166.26779191,3249.59062854,3316.24889785,3477.33971533,3616.21110971,3882.84418693,3905.06361003,3943.94760045,4021.71558131,4160.58697569,4310.56808162,4438.32976445,4566.09144729,4732.73712054,4832.7245245,4871.60851493,4921.6022169,4966.04106311,5071.58332284,5082.69303439,5204.89986144,5388.21010203,5454.86837133,5532.63635219,5727.05630432,5882.59226603,5949.25053533,5993.68938153,6143.67048747,6293.6515934,6421.41327623,6460.29726666,6526.95553596,6632.49779569,6715.82063232,6743.5949112,6826.91774783,7065.77654616,7076.88625772,7093.55082504,7137.98967124,7154.65423857,7432.39702733,7510.16500819,7537.93928706,7554.60385439,7593.48784482,7604.59755637,7626.81697947,7871.23063358,7882.34034513,7926.77919133,7943.44375866,8054.54087417,8198.96712432,8210.07683587,8371.16765336,8393.38707646,8415.60649956,8460.04534576,8537.81332662,8571.14246127,8687.79443255,8710.01385565,8732.23327875,8760.00755763,8776.67212495,8798.89154805,8810.0012596,8821.11097116,8832.22068271,8898.87895201,8921.09837511,8937.76294244,8959.98236554,8993.31150019,9043.30520217,9054.41491372,9071.07948104,9126.6280388,9137.73775035,9148.8474619,9187.73145232,9209.95087543,9221.06058698,9232.17029853,9248.83486585,9271.05428895,9282.1640005,9293.27371205,9326.60284671,9426.59025066,9465.47424109,9482.13880841,9537.68736617,9554.35193349,9565.46164504,9587.68106814,9598.7907797,9665.449049,9704.33303943,9793.21073183,9854.31414536,9887.64328001,9898.75299156,9937.63698199,9954.30154931,9965.41126086,9987.63068397,9998.74039552,10037.6243859,10065.3986648,10076.5083764,10098.7277995,10109.837511,10176.4957803,10193.1603477,10209.824915,10259.818617,10304.2574632,10320.9220305,10359.8060209,10376.4705882,10482.012848,10493.1225595,10559.7808288,10870.8527522,10881.9624638,10893.0721753,11193.0343872,11204.1440988,11248.582945,11270.8023681,11287.4669354,11337.4606374,11348.5703489,11398.5640509,11409.6737624,11465.2223202,11481.8868875,11520.7708779,11598.5388588,11615.2034261,11759.6296763,11776.2942436,11804.0685225,11881.8365033,11915.165638,11926.2753495,11948.4947726,11959.6044842,11970.7141957);
massEigenValues=(0.0288641708751,0.10587374949,0.170815351105,0.162170522066,0.283173913826,0.247877995751,0.22220307395,0.262624657016,0.258388458233,0.286720247727,0.186542981636,0.183951510007,0.29287261321,0.262888223516,0.204354579123,0.192921281466,0.256725272357,0.236632861953,0.447416908942,0.513471467116,0.54463004763,0.978354507512,0.905696783593,0.976964600071,1.0,0.933516937609,0.646001080266,0.559394878364,0.82783629787,0.712016484586,0.716997871956,0.711171090304,0.651054126743,0.320285180161,0.319165845238,0.31615733496,0.328796657433,0.272379274648,0.310531376581,0.319072098337,0.260660087311,0.186659983703,0.172189299441,0.166881897035,0.169814350913,0.161990722651,0.191536197288,0.190707332578,0.182707660864,0.12785068332,0.12466779194,0.125538861661,0.109362583582,0.112802904867,0.105810799357,0.108691095914,0.0713010514487,0.031652036295,0.0187470596435,0.0179548772457,0.0138747130696,0.0201770621637,0.0193663272914,0.018014207223,0.0103274811248,0.0367352587064,0.0364806835028,0.0363738415218,0.0349112961548,0.0349363939995,0.0120434003915,0.0141643429685,0.0146417580305,0.0147735123852,0.0152598040192,0.0154396761254,0.0159709519505,0.0211754997282,0.0214014804358,0.0226271142097,0.022601670592,0.0173836982155,0.0104585057182,0.0103309178563,0.0101022192911,0.010620950028,0.0107080335891,0.0111347455184,0.0140815422071,0.0145358298512,0.021118522434,0.0209734440919,0.0206351929272,0.0210668539322,0.0209927362087,0.0211310981122,0.021412694324,0.0214218757016,0.0210632943024,0.0186778078624,0.0187691362274,0.0184635330139,0.0186585427743,0.0180395750275,0.0174692157256,0.0175056900843,0.017663464142,0.0194989401158,0.0194555048181,0.0194966730545,0.019011632227,0.0189818594935,0.0190424474009,0.0190010842015,0.0188911176829,0.0189768394028,0.0189140358982,0.0189649835048,0.0190250211261,0.0215834219841,0.0224355026402,0.0225501456454,0.0244253154351,0.0244164839118,0.0243962449223,0.0244379829541,0.0242857466049,0.0245826389819,0.0235836733274,0.0214865686974,0.0202750188528,0.020423850313,0.0204973162143,0.019630614419,0.0196122752806,0.0194609673329,0.0190038633546,0.0190160263729,0.0192021694223,0.0192822592572,0.0193311857166,0.0195696787941,0.0197650589289,0.0210804514898,0.0210986305568,0.0211301130225,0.0193369468036,0.020921927072,0.0207528585411,0.0211526521125,0.0208216679364,0.0167500028081,0.016621514468,0.0138041349849,0.0324190160524,0.0323947999191,0.03234110209,0.0190103716951,0.0190291585751,0.0180599033085,0.0181379653026,0.0179507545562,0.0185250468383,0.0184940312276,0.0176854801573,0.0176044768151,0.0171100251796,0.0170832450727,0.0171302809819,0.0159994941579,0.0160597644948,0.0131936270467,0.013136470732,0.0128466181804,0.0115459666148,0.0115043234794,0.0115960862342,0.0113877724991,0.0113418487998,0.0113814080323);
t60=(0.010777330712,6.10909018068,0.470002336384,0.436436337622,0.156719686852,0.150918156646,0.127349440656,0.152803653959,0.152803653959,0.156719686852,0.12225859813,0.531296769015,0.763704826809,0.0200752124053,0.0170952109637,0.0169775302929,0.0196900439733,0.0191393313718,0.0358036173538,0.067210373342,0.0679562840982,0.149078647077,0.130057335639,0.149078647077,0.150918156646,0.135834178312,0.0978225549736,0.0905822463244,0.235040347058,0.101053767176,0.101053767176,0.101053767176,0.0978225549736,0.0249118085045,0.0248614367015,0.0248614367015,0.0250131689102,0.0222125379598,0.0247613036648,0.0248614367015,0.0200099704387,0.01690769995,0.0158436662822,0.0150149409046,0.0153129224499,0.0149785108511,0.0169775302929,0.016954189211,0.0168384443466,0.011940676053,0.0113915104023,0.0119291707317,0.0113497657404,0.0113601729964,0.0113393776687,0.0113497657404,0.0110956842742,0.0107961001926,0.0104768594476,0.0104680175079,0.0100199855177,0.349164741141,0.330295206849,0.305528943153,0.00830068211491,0.230607102062,0.230607102062,0.230607102062,0.210733934924,0.210733934924,0.00831731429349,0.089916776793,0.0933457228774,0.0947917280661,0.0962832767358,0.0962832767358,0.0994118910513,0.185199926501,0.188047950499,0.203712082574,0.203712082574,0.101895228693,0.00830068211491,0.00830068211491,0.0174830543485,0.0176079071132,0.0176079071132,0.0177090865053,0.0185626061472,0.0187319256077,0.0349870423412,0.0349870423412,0.034788698136,0.0349870423412,0.0349870423412,0.0349870423412,0.0352888456347,0.0352888456347,0.0349870423412,0.0209639531812,0.0209639531812,0.0208221167675,0.0209639531812,0.0206475075588,0.0203405081193,0.0203405081193,0.0204079356129,0.0335524432477,0.0335524432477,0.0335524432477,0.0332795575752,0.0332795575752,0.03337002376,0.0332795575752,0.021035601253,0.0332795575752,0.021035601253,0.021035601253,0.03337002376,0.0352888456347,0.035595912948,0.035595912948,0.047992205691,0.047992205691,0.047992205691,0.047992205691,0.0476193358445,0.0485626077877,0.0364415666244,0.0352888456347,0.0343986954966,0.0344953722058,0.0346903688572,0.0336444047217,0.0336444047217,0.0335524432477,0.0332795575752,0.0332795575752,0.0334609842965,0.0334609842965,0.0335524432477,0.0336444047217,0.034111896908,0.0349870423412,0.0349870423412,0.0349870423412,0.0335524432477,0.0349870423412,0.0349870423412,0.0349870423412,0.0349870423412,0.0201738801534,0.0201079938205,0.0184514239551,0.167448544174,0.167448544174,0.167448544174,0.0569063977498,0.0571719490641,0.0206475075588,0.0206475075588,0.0205099225201,0.0208221167675,0.0208221167675,0.0204079356129,0.0203741658629,0.0202402013817,0.0202402013817,0.0202402013817,0.0195649307995,0.0199451528122,0.0182871361259,0.0182600400447,0.0181524573841,0.0177857408977,0.0177857408977,0.0177857408977,0.0177345641208,0.0177345641208,0.0177345641208);

modeFreqs=par(i,nModes,ba.take(i+1, modeFrequencies));
modeGains=par(i,nModes,ba.take(i+1, massEigenValues));
modeT60 = par(i,nModes,ba.take(i+1,t60));

cabinetFenderTweedBass=modalModel(nModes,modeFrequencies,modeT60,modeGains);

modalModel(n,modeFreqs,modeRes,modeGains) = _ <: par(i,n,gain(i)*pm.modeFilter(freqs(i),res(i))) :> _
with {
	freqs(i) = ba.take(i+1,modeFreqs);
	res(i) = ba.take(i+1,modeRes);
	gain(i) = ba.take(i+1,modeGains);
};


cab = cabinetFenderTweedBass;

wetdry = vslider("[2] amount[style:knob]",  1, 0, 1, 0.01);
dry = 1 - wetdry;

process = _ <: _*dry, (_*wetdry:cab) :> _;
