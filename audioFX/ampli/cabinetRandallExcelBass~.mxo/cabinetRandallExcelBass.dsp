declare name "cabinetRandallExcelBass";
declare description "Generated by tools/physicalModeling/ir2dsp.py";

import("stdfaust.lib");

pi = 4*atan(1.0);
nModes = 193;

modeFrequencies=(72.2131250787,127.761682832,166.645673259,183.310240584,233.303942562,333.291346517,472.162740899,566.595289079,633.253558383,711.021539237,761.015241214,883.222068271,1027.64831843,1172.07456859,1216.51341479,1260.95226099,1327.61053029,1422.04307847,1549.8047613,1599.79846328,1666.45673259,1727.56014611,1771.99899232,1805.32812697,1921.98009825,1983.08351178,2049.74178108,2077.51605996,2105.29033883,2221.94231011,2355.25884872,2410.80740647,2477.46567578,2499.68509888,2583.00793551,2649.66620481,2677.44048369,2738.54389722,2816.31187807,2999.62211865,3149.60322459,3282.91976319,3432.90086913,3549.55284041,3666.20481169,3721.75336944,3799.5213503,3816.18591762,3877.28933115,3932.8378889,4060.59957173,4138.36755259,4260.57437964,4377.22635093,4504.98803376,4549.42687996,4599.42058194,4649.41428391,4754.95654365,4793.84053407,4838.27938027,4899.3827938,4999.37019776,5071.58332284,5132.68673636,5193.79014989,5254.89356342,5282.6678423,5321.55183272,5343.77125583,5365.99067893,5399.31981358,5471.53293866,5504.86207331,5538.19120796,5621.51404459,5677.06260234,5699.28202544,5738.16601587,5849.26313138,5904.81168913,5938.14082378,5960.36024688,5988.13452576,6032.57337196,6154.78019902,6182.55447789,6221.43846832,6254.76760297,6282.54188185,6304.76130495,6343.64529538,6382.5292858,6432.52298778,6476.96183398,6599.16866104,6632.49779569,6676.93664189,6726.93034387,6832.4726036,6876.9114498,6921.35029601,6971.34399798,7010.22798841,7043.55712306,7176.87366167,7321.29991183,7332.40962338,8254.51568208,8387.83222068,8454.49048999,8515.59390351,8526.70361506,8565.58760549,8693.34928832,8737.78813453,8798.89154805,8815.55611538,8865.54981736,9015.53092329,9159.95717345,9193.2863081,9332.15770248,9487.69366419,9604.34563547,9621.0102028,9632.11991435,9715.44275098,9976.52097241,10104.2826552,10126.5020783,10154.2763572,10287.5928958,10315.3671747,10437.5740018,10448.6837133,10465.3482806,10576.4453961,10731.9813579,11204.1440988,11259.6926565,11326.3509258,11476.3320317,11537.4354453,11692.971407,11837.3976571,12942.8139564,12965.0333795,12981.6979468,13009.4722257,13059.4659277,13070.5756392,13148.3436201,13159.4533317,13187.2276105,14514.8381408,14587.0512659,14625.9352563,14648.1546794,14659.264391,14698.1483814,14764.8066507,14798.1357854,14853.6843431,14875.9037662,14887.0134778,14909.2329009,14931.452324,15081.4334299,15092.5431415,15103.652853,15203.640257,15214.7499685,15231.4145358,15259.1888147,15270.2985263,15281.4082378,15298.0728051,15309.1825167,15320.2922282,15336.9567956,15359.1762187,15375.840786,15386.9504975,15409.1699206,15420.2796322,15442.4990553,15464.7184784,15486.9379015,15536.9316035,15548.041315,15559.1510266,15581.3704497);
massEigenValues=(0.109436173006,0.518870371163,0.573826186881,0.614937470254,0.614288862093,0.912319063614,0.884646157174,0.348496550267,1.0,0.66103392159,0.644554697715,0.455794096102,0.583324678691,0.625385657502,0.779545188267,0.485558067087,0.365581496911,0.335286936909,0.342915191513,0.316980934561,0.334552827419,0.374172965963,0.388305980352,0.395645702827,0.486291773939,0.296890100661,0.384880138846,0.37534159947,0.316924683908,0.504112160364,0.550504400638,0.474530245352,0.53920867826,0.532816180564,0.410793123513,0.367881417393,0.352247626236,0.42262438798,0.422480193758,0.299143024285,0.431323510399,0.452736990461,0.280186150125,0.258752838293,0.152406322816,0.219334120109,0.245057308888,0.244444791767,0.293147834151,0.342831228346,0.474464680046,0.486461320647,0.450815028533,0.341385250381,0.237373045987,0.247485327904,0.206665291588,0.203251689548,0.116862784171,0.076009768148,0.0769067403007,0.0644338762918,0.0628066650045,0.0885442759597,0.151997628814,0.173501372488,0.180323911708,0.174851180169,0.13025029753,0.130800977998,0.123609803685,0.116049008798,0.0913209727203,0.0988242197312,0.0921383275894,0.105563161285,0.0817431872701,0.0753054164761,0.0777459527838,0.0416000309823,0.0603926148106,0.0592374289747,0.0562801478752,0.0609811330131,0.0960700943269,0.114173802222,0.117402959707,0.0969916765817,0.10743353533,0.116057433503,0.105190115356,0.122094177933,0.11036263212,0.132426637264,0.112979088337,0.0519959460749,0.0401816183865,0.0350043702883,0.0356424007082,0.0282038563896,0.0256394994392,0.017200143477,0.0178949085452,0.0173789424954,0.0128245468298,0.0106752217409,0.0120415204978,0.0120156877089,0.0149647427135,0.0163445575778,0.0111807485014,0.0176920661183,0.0176006002967,0.0164358607535,0.0174294793687,0.0173114121745,0.0127680246448,0.0130430879774,0.0151210766038,0.0153819560786,0.0124055775297,0.0136965079434,0.0158118656945,0.01947562826,0.0173697189588,0.0172943762944,0.0170764460348,0.0112616694588,0.015189125401,0.0219856127027,0.021323452731,0.019895507513,0.0161972809935,0.0155173952973,0.0146741616963,0.014814616769,0.0145254711193,0.0138164382127,0.0109853385596,0.0166106191165,0.018641649607,0.0221643918243,0.013217600008,0.0135946802922,0.0136268333376,0.0118189541899,0.0105508644026,0.0106643577743,0.0111309680581,0.0108852182837,0.0120830400396,0.0120379584753,0.0116279378988,0.0116354678093,0.0121440886219,0.0107832296557,0.0104473450147,0.011980213824,0.0127469545211,0.0125911476274,0.0113398040471,0.0146876314488,0.0158055752273,0.0125804725053,0.0132067199157,0.0130662407679,0.0128712117995,0.013071168911,0.0104280423788,0.0105549815322,0.0110118739213,0.0105143632952,0.010677722154,0.0114345370648,0.0116588044025,0.0113262188725,0.0111271207165,0.0108354850218,0.0108600836038,0.0108086041288,0.0117189885118,0.0118036567929,0.0114685531186,0.0114843076756,0.0118576049581,0.0118269486509,0.01185972175,0.0114366865116,0.0107620592932,0.0103517781462,0.0101931566536,0.0105138855859,0.0102128687921);
t60=(4.07275290229,0.160841826757,0.162985339515,0.167448544174,0.167448544174,0.718785622302,0.763704826809,0.13891953749,1.22188071348,0.381891589759,0.370321491753,0.197143252978,2.03641562423,1.52733130493,2.03641562423,0.436436337622,0.313361009441,1.11080777118,0.1328829652,0.0474350687711,0.1328829652,0.452597744427,0.452597744427,0.452597744427,0.939926321566,0.0470707869452,0.581888999203,0.075966717416,0.0474350687711,0.152803653959,0.26568756262,0.150918156646,0.254620512528,0.21825734818,0.089916776793,0.0754982710046,0.0754982710046,0.24942577474,0.24942577474,0.610979531587,0.277760708206,0.290983677212,0.126037367835,0.718785622302,0.0187604475675,0.0661217468466,0.0675812681922,0.0675812681922,0.0809924340054,0.112170323211,0.177151163056,0.182436918149,0.137359524421,0.112170323211,0.067210373342,0.0683354901278,0.0654154009655,0.0654154009655,0.0145548173666,0.014203372376,0.0142197204526,1.74551029889,1.52733130493,0.177151163056,1.35763653188,0.339467897125,0.488799295711,0.370321491753,0.26568756262,0.26568756262,0.207163501523,0.207163501523,0.194015238893,0.488799295711,0.194015238893,0.763704826809,0.185199926501,0.182436918149,0.185199926501,0.0732401910273,0.100226100112,0.0994118910513,0.0919432065767,0.100226100112,1.11080777118,0.169773129941,0.172163197002,0.15875398966,0.167448544174,0.172163197002,0.165186785054,0.177151163056,0.169773129941,0.260036302995,0.169773129941,0.0873499657672,0.0382597222295,0.0381407774625,0.0381407774625,0.763704826809,0.718785622302,0.26568756262,0.271589989347,0.26568756262,0.0322311021758,1.35763653188,0.872794323539,0.872794323539,0.531296769015,0.814613258605,0.0551145245097,0.581888999203,0.581888999203,0.509162668329,0.271589989347,0.26568756262,0.0892610221477,0.113208211565,0.24942577474,0.555443060688,0.152803653959,0.581888999203,0.678857440537,0.763704826809,0.581888999203,0.581888999203,0.581888999203,0.188047950499,0.154736885385,0.407345805406,0.370321491753,0.321605289754,0.15875398966,0.156719686852,0.643132225291,0.643132225291,0.643132225291,0.610979531587,0.581888999203,0.197143252978,0.226338051331,0.284218437251,0.145531021491,0.145531021491,0.610979531587,0.814613258605,0.154736885385,0.169773129941,0.177151163056,0.174621551698,0.188047950499,0.188047950499,0.185199926501,0.185199926501,0.190984975253,0.0579837054606,0.0577105673004,0.100226100112,0.127349440656,0.127349440656,0.0978225549736,0.172163197002,0.24942577474,0.127349440656,0.154736885385,0.154736885385,0.152803653959,0.154736885385,0.0577105673004,0.0577105673004,0.0579837054606,0.0577105673004,0.0579837054606,0.145531021491,0.145531021491,0.143819813862,0.0582594449382,0.0579837054606,0.0579837054606,0.0579837054606,0.145531021491,0.145531021491,0.145531021491,0.145531021491,0.145531021491,0.145531021491,0.145531021491,0.145531021491,0.0579837054606,0.0571719490641,0.0571719490641,0.0577105673004,0.0571719490641);

modeFreqs=par(i,nModes,ba.take(i+1, modeFrequencies));
modeGains=par(i,nModes,ba.take(i+1, massEigenValues));
modeT60 = par(i,nModes,ba.take(i+1,t60));

cabinetRandallExcelBass=modalModel(nModes,modeFrequencies,modeT60,modeGains);

modalModel(n,modeFreqs,modeRes,modeGains) = _ <: par(i,n,gain(i)*pm.modeFilter(freqs(i),res(i))) :> _
with {
	freqs(i) = ba.take(i+1,modeFreqs);
	res(i) = ba.take(i+1,modeRes);
	gain(i) = ba.take(i+1,modeGains);
};


cab = cabinetRandallExcelBass;

wetdry = vslider("[2] amount[style:knob]",  1, 0, 1, 0.01);
dry = 1 - wetdry;

process = _ <: _*dry, (_*wetdry:cab) :> _;
