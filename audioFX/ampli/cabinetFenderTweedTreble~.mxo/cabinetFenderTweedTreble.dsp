declare name "cabinetFenderTweedTreble";
declare description "Generated by tools/physicalModeling/ir2dsp.py";

import("stdfaust.lib");

pi = 4*atan(1.0);
nModes = 122;

modeFrequencies=(16.6645673259,38.883990427,122.206827056,183.310240584,266.633077214,327.736490742,416.614183146,488.827308225,544.375865978,616.588991057,727.686106563,755.460385439,877.667212495,1010.9837511,1088.75173196,1249.84254944,1372.0493765,1572.02418441,1722.00529034,1777.55384809,1833.10240584,1994.19322333,2016.41264643,2105.29033883,2166.39375236,2460.80110845,2510.79481043,2599.67250283,2699.65990679,2760.76332032,2866.30558005,3044.06096486,3077.39009951,3182.93235924,3321.80375362,3488.44942688,3627.32082126,3782.85678297,3921.72817735,4093.92870639,4160.58697569,4205.02582189,4243.90981232,4388.33606248,4432.77490868,4577.20115884,4727.18226477,4943.82164001,5038.25418818,5182.68043834,5282.6678423,5332.66154428,5577.07519839,5660.39803502,5771.49515052,5927.03111223,5960.36024688,6077.01221816,6093.67678549,6299.20644917,6338.0904396,6410.30356468,6488.07154553,6610.27837259,6765.8143343,6815.80803628,6954.67943066,7076.88625772,7099.10568082,7549.04899861,7560.15871017,7654.59125834,7665.7009699,7787.90779695,7832.34664315,7921.22433556,7932.33404711,7976.77289331,8004.54717219,8037.87630684,8048.98601839,8148.97342235,8160.0831339,8204.5219801,8221.18654742,8248.9608263,8337.83851871,8348.94823026,8415.60649956,8443.38077844,8471.15505731,8482.26476886,8587.80702859,8643.35558635,8676.684721,8726.67842298,8771.11726918,9071.07948104,9082.18919259,9093.29890414,9109.96347147,9132.18289457,9187.73145232,9204.39601965,9221.06058698,10104.2826552,10159.831213,10220.9346265,10237.5991939,10398.6900113,10432.019146,10465.3482806,10498.6774153,10520.8968384,10543.1162615,10559.7808288,10665.3230886,10687.5425117,10820.8590503,10843.0784734,10854.1881849,10937.5110215);
massEigenValues=(0.0151169184278,0.128447977019,0.18234880551,0.172255715818,0.29443375581,0.261643594716,0.227381227903,0.274509307112,0.265097646634,0.296105128007,0.203381472345,0.194958998583,0.191428838145,0.105178772493,0.27387278437,0.153623640688,0.246795711114,0.199601513205,0.227613653854,0.239990333849,0.239640314844,0.405383114066,0.413363434621,0.516175783128,0.531756557664,1.0,0.9859443608,0.874373652055,0.765948092301,0.845984014599,0.620678728824,0.632516326592,0.666705891979,0.768600061526,0.651127058081,0.739487132887,0.674895461952,0.446937843073,0.350054446569,0.21925981352,0.212032364176,0.216706978773,0.219257093409,0.178077429879,0.177162534367,0.172516246276,0.154806963507,0.193355957026,0.204212308253,0.172273829493,0.160989612208,0.164870815103,0.0731762742677,0.0725063186894,0.0625019571489,0.0832419208142,0.0834425390103,0.0727528979629,0.0729894134618,0.0323016613834,0.0326449675472,0.0277802958569,0.0258530996462,0.0165477200515,0.0120977767218,0.0152853103544,0.0252472859548,0.0290716642194,0.0286703325384,0.0129418068657,0.0130007409121,0.0130366704058,0.01306939579,0.0149636093071,0.0159393962194,0.0185017793064,0.0186496318998,0.0171994758712,0.0175769207231,0.0179093559937,0.0179618402387,0.0161859942591,0.0164185619968,0.0172317147705,0.017120825152,0.0177827392378,0.021600097974,0.0217014590539,0.0197384978783,0.0192880040766,0.0188032965038,0.0187222403361,0.0145631683405,0.0155284512444,0.0151860167699,0.0135670602402,0.0129874708032,0.0103986713391,0.0105617837574,0.0106102696306,0.0107854588038,0.0105988706378,0.0102293071846,0.0103161165852,0.0102007041562,0.0131083446432,0.0149902921164,0.0168204856251,0.0167226330821,0.0223712572846,0.0233293904203,0.0239084776378,0.0244326186657,0.0245123209334,0.0248481031151,0.0247714664025,0.0216518472074,0.020877967441,0.0151459094927,0.0153687123372,0.0150749215072,0.0119221258269);
t60=(0.0102432911015,6.10909018068,0.488799295711,0.452597744427,0.154736885385,0.150918156646,0.123492741768,0.152803653959,0.152803653959,0.156719686852,0.121048892983,0.119862907549,0.509162668329,0.0123950669059,0.678857440537,0.0153701226114,0.21825734818,0.018933427983,0.0213271777771,0.0215890448404,0.0215890448404,0.0325731514408,0.0344953722058,0.0362264002984,0.0365501132202,0.160841826757,0.15875398966,0.143819813862,0.112170323211,0.12225859813,0.0458387776637,0.0461841387497,0.092639152164,0.185199926501,0.0912576482394,0.254620512528,0.0933457228774,0.0350870669275,0.0317313203742,0.0205099225201,0.0204418179293,0.0204758133759,0.0205099225201,0.0155052748597,0.0155052748597,0.0154858213102,0.0153701226114,0.119862907549,0.127349440656,0.0154858213102,0.0154084952857,0.0154470610316,0.0110758517488,0.0110758517488,0.0110265814344,0.194015238893,0.194015238893,0.0110758517488,0.0110758517488,0.0105212958668,0.0105302287663,0.0104768594476,0.010459190593,0.0102687236562,0.117559358926,0.126037367835,0.203712082574,0.260036302995,0.260036302995,0.0491467545253,0.0491467545253,0.0491467545253,0.0491467545253,0.0514146184385,0.0569063977498,0.0675812681922,0.0679562840982,0.0630578806178,0.0643837642314,0.0650678637661,0.0650678637661,0.0574399938194,0.0574399938194,0.0630578806178,0.0630578806178,0.0643837642314,0.152803653959,0.154736885385,0.0719491006169,0.0711133948183,0.0691067566345,0.0687189569013,0.0511998226482,0.0518496709334,0.051631226853,0.0503583181664,0.0491467545253,0.0335524432477,0.0335524432477,0.0335524432477,0.034111896908,0.0335524432477,0.0324012219143,0.0334609842965,0.0172386095044,0.0683354901278,0.0745785164711,0.0799347341566,0.0783990353539,0.114265499704,0.118699950961,0.131454958861,0.135834178312,0.137359524421,0.13891953749,0.137359524421,0.10820246688,0.0947917280661,0.0745785164711,0.0745785164711,0.0745785164711,0.0485626077877);

modeFreqs=par(i,nModes,ba.take(i+1, modeFrequencies));
modeGains=par(i,nModes,ba.take(i+1, massEigenValues));
modeT60 = par(i,nModes,ba.take(i+1,t60));

cabinetFenderTweedTreble=modalModel(nModes,modeFrequencies,modeT60,modeGains);

modalModel(n,modeFreqs,modeRes,modeGains) = _ <: par(i,n,gain(i)*pm.modeFilter(freqs(i),res(i))) :> _
with {
	freqs(i) = ba.take(i+1,modeFreqs);
	res(i) = ba.take(i+1,modeRes);
	gain(i) = ba.take(i+1,modeGains);
};


cab = cabinetFenderTweedTreble;

wetdry = vslider("[2] amount[style:knob]",  1, 0, 1, 0.01);
dry = 1 - wetdry;

process = _ <: _*dry, (_*wetdry:cab) :> _;
