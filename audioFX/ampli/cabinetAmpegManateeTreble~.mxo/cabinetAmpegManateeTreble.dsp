declare name "cabinetAmpegManateeTreble";
declare description "Generated by tools/physicalModeling/ir2dsp.py";

import("stdfaust.lib");

pi = 4*atan(1.0);
nModes = 69;

modeFrequencies=(131.152416357,557.397769517,754.126394052,852.49070632,1016.43122677,1147.58364312,1245.94795539,1409.88847584,1508.2527881,1868.92193309,2229.59107807,2983.71747212,3705.05576208,4164.08921933,4557.5464684,5213.30855019,5344.46096654,5869.07063197,6852.71375465,6951.07806691,7213.38289963,7344.53531599,7574.05204461,7705.20446097,7836.35687732,7967.50929368,8065.87360595,8197.0260223,8295.39033457,8426.54275093,8557.69516729,8688.84758364,8787.21189591,9541.33828996,9639.70260223,9770.85501859,9902.00743494,10000.3717472,10262.6765799,10393.8289963,10524.9814126,10623.3457249,10754.4981413,10852.8624535,11967.6579926,12066.0223048,12229.9628253,12361.1152416,12459.4795539,12590.6319703,12688.9962825,12820.1486989,13311.9702602,13443.1226766,13574.2750929,13672.6394052,13803.7918216,13934.9442379,14066.0966543,14164.4609665,14426.7657993,14557.9182156,14689.070632,14787.4349442,14918.5873606,15049.739777,15148.1040892,15508.7732342,16754.7211896);
massEigenValues=(0.66978497919,0.238389827636,0.153718791254,0.139423229831,0.169572658086,0.237862617056,0.262793271005,0.267597801215,0.245515312458,0.226284368712,0.333509867501,1.0,0.577888640991,0.493938895054,0.656934282283,0.272468002877,0.31740453831,0.776929949393,0.145177395781,0.147505207333,0.0983724559777,0.0826110532374,0.0487086259585,0.0391797182141,0.0404173153704,0.0469826555432,0.0509715874943,0.0511286869874,0.0509470419886,0.0490911990203,0.0537748679525,0.0532359050413,0.0502608261938,0.0404413053164,0.0396908893117,0.0374256105632,0.0358455164839,0.036597973554,0.0224481884853,0.0174725578797,0.0171299826378,0.0182785928174,0.0199418064535,0.0181834607127,0.0447380104087,0.0449005751448,0.0468154170295,0.0483199626808,0.0494774773788,0.0489136520395,0.0478720879747,0.04543141292,0.0278656268625,0.0263494124332,0.0251044021814,0.0232998520974,0.0230982061554,0.0228092369328,0.0219554184591,0.0202937511743,0.014398598654,0.0130192939566,0.0114205680938,0.0104071603611,0.0102820877648,0.0117009576356,0.0124678163196,0.0230296795026,0.0106033795024);
t60=(12.0197673072,10.3026688841,0.165486920743,0.165486920743,0.38368544455,0.414550382794,4.00664133265,4.00664133265,0.416946174865,0.414550382794,0.767292536428,6.00992282623,6.00992282623,2.40401613801,5.15137361468,0.474539755394,0.511554474731,4.50746170603,0.165486920743,0.165486920743,0.159631750801,0.157541531845,0.152226319668,0.128402442064,0.12978723414,1.80303169017,1.89792397139,1.89792397139,1.89792397139,1.89792397139,2.12119992724,2.12119992724,1.89792397139,2.77385272135,2.77385272135,2.48691054461,0.116023915009,2.48691054461,0.112063042715,0.107717369312,0.107717369312,0.107717369312,0.108039641728,0.107717369312,1.53450672419,1.53450672419,1.60270354094,1.67724424762,1.71717676906,1.67724424762,1.67724424762,1.53450672419,0.868971525032,0.868971525032,0.858627558655,0.829022413513,0.829022413513,0.819602594605,0.819602594605,0.801390944719,0.700254403656,0.601062796196,0.515207875603,0.50795253021,0.50795253021,0.591210592185,0.596095982604,9.0148450667,4.24232150836);

modeFreqs=par(i,nModes,ba.take(i+1, modeFrequencies));
modeGains=par(i,nModes,ba.take(i+1, massEigenValues));
modeT60 = par(i,nModes,ba.take(i+1,t60));

cabinetAmpegManateeTreble=modalModel(nModes,modeFrequencies,modeT60,modeGains);

modalModel(n,modeFreqs,modeRes,modeGains) = _ <: par(i,n,gain(i)*pm.modeFilter(freqs(i),res(i))) :> _
with {
	freqs(i) = ba.take(i+1,modeFreqs);
	res(i) = ba.take(i+1,modeRes);
	gain(i) = ba.take(i+1,modeGains);
};


cab = cabinetAmpegManateeTreble;

wetdry = vslider("[2] amount[style:knob]",  1, 0, 1, 0.01);
dry = 1 - wetdry;

process = _ <: _*dry, (_*wetdry:cab) :> _;
