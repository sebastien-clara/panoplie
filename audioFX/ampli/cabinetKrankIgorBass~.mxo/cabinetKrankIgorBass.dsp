declare name "cabinetKrankIgorBass";
declare description "Generated by tools/physicalModeling/ir2dsp.py";

import("stdfaust.lib");

pi = 4*atan(1.0);
nModes = 109;

modeFrequencies=(121.879318287,446.890833717,528.143712575,650.023030861,690.64947029,914.094887149,975.034546292,1076.60064486,1178.16674344,1279.73284201,1360.98572087,1462.55181944,1665.68401658,1848.50299401,2031.32197144,2071.94841087,2132.88807001,2193.82772916,2396.9599263,2457.89958544,2721.97144173,2884.47719945,3026.66973745,3067.29617688,3148.54905573,3311.05481345,3351.68125288,3412.62091202,3615.75310917,3697.00598802,3757.94564717,3798.5720866,3900.13818517,3961.07784431,4082.9571626,4184.52326117,4225.1497006,4306.40257946,4367.3422386,4428.28189774,4509.5347766,4570.47443574,4611.10087517,4732.98019346,4834.54629203,4895.48595117,4956.42561032,5037.67848918,5179.87102718,5220.49746661,5261.12390603,5301.75034546,5362.69000461,5403.31644404,5443.94288346,5504.88254261,5586.13542146,5626.76186089,5708.01473975,5768.95439889,5850.20727775,5911.1469369,5972.08659604,6053.3394749,6114.27913404,6175.21879318,6398.66421004,6459.60386918,6520.54352833,6683.04928604,7719.02349148,7779.96315062,8003.40856748,8104.97466605,8145.60110548,8206.54076462,8348.73330263,8429.98618148,8490.92584063,8531.55228006,8633.11837863,10075.3569784,10115.9834178,10156.6098572,10197.2362966,10258.1759558,10298.8023952,10400.3684938,10440.9949332,10583.1874712,10948.8254261,11070.7047444,11131.6444035,11212.8972824,11273.8369415,11619.1616766,11720.7277752,11781.6674344,12269.1847075,12309.8111469,12350.4375864,12411.3772455,12452.0036849,12553.5697835,12634.8226624,12675.4491018,12777.0152004,12817.6416398,12878.5812989);
massEigenValues=(1.0,0.176729974379,0.131220875342,0.345064403459,0.249530139,0.22595636564,0.246591836092,0.248467754908,0.192680745574,0.155590599863,0.115769501725,0.0837308721563,0.207059155124,0.196281586191,0.38441571809,0.363793257848,0.467116619643,0.446487348998,0.298263059171,0.331565676325,0.390254545188,0.241942856069,0.213577115968,0.264366325882,0.26307727164,0.241859049704,0.247353729449,0.233100171186,0.118764707391,0.110663277232,0.121938674091,0.125349892404,0.0841998897331,0.0667883079953,0.128075649791,0.125970366045,0.118388289906,0.133166779499,0.13845939125,0.122156801626,0.116384036279,0.104683195095,0.122843824552,0.132580029949,0.131821137716,0.129197206949,0.146610255944,0.119677582403,0.0664812564264,0.0696129094386,0.0660761936261,0.0889398187443,0.0737126232286,0.0665234824413,0.0752792647288,0.0620681570243,0.0309315493514,0.0175665287984,0.0165861633297,0.0182026014122,0.0202164927141,0.0205307228096,0.0218811520173,0.0193066750659,0.0181072933253,0.0147410633441,0.024490987818,0.0255207856161,0.0237549723736,0.0260132118607,0.0244395671376,0.0248407778287,0.0146896185607,0.0181479021591,0.0189896838231,0.0209497315712,0.0202891050372,0.0193216091692,0.017665183572,0.0181524425568,0.0153869918647,0.0105837710251,0.0116139715023,0.0115749000553,0.011329912487,0.0104128771276,0.0107931139247,0.0108321074151,0.0103568472179,0.0103269850784,0.0113474097409,0.0132946717156,0.0147910754069,0.0160947812283,0.017761575567,0.035648290045,0.039497692575,0.0385747140965,0.0141213919126,0.012713560169,0.0122677224799,0.0139963242067,0.0136744118259,0.0141476910107,0.0133396841278,0.0136185138877,0.0140599082345,0.0139978437705,0.0126573652347);
t60=(11.1699182719,1.86171833362,1.71851525772,22.3397581989,4.46801431596,5.58499830857,5.58499830857,5.58499830857,3.19146118162,1.71851525772,1.59576976411,1.01551834006,6.3828440176,0.513634207371,1.59576976411,1.59576976411,3.19146118162,2.62827597535,1.35399833734,1.48939033632,4.964451646,0.558570344688,0.544948588771,1.65486944621,0.558570344688,0.558570344688,0.558570344688,0.551675381816,0.395470913636,0.395470913636,0.395470913636,0.399001204338,0.38195321933,0.249683714367,1.48939033632,1.48939033632,1.4413480141,1.48939033632,1.54074592215,1.4413480141,1.4413480141,1.39630833702,1.4413480141,2.234046331,2.234046331,2.234046331,2.35162359334,2.03095833242,0.249683714367,2.62827597535,2.62827597535,8.93595028654,2.62827597535,2.62827597535,2.79253832717,0.228034270525,0.181701769384,0.161375684822,0.783926763216,14.8931982476,2.62827597535,2.62827597535,2.62827597535,2.62827597535,0.876144223639,0.744734342557,1.54074592215,1.54074592215,1.54074592215,1.59576976411,3.19146118162,3.43695216898,0.783926763216,0.812430341886,1.2766314808,1.65486944621,1.4413480141,1.2766314808,0.812430341886,0.812430341886,0.783926763216,1.20762860875,1.35399833734,1.35399833734,1.2766314808,1.20762860875,1.20762860875,1.20762860875,1.14570295436,1.14570295436,0.409980732307,0.425596060987,0.442448247398,0.460690304869,0.720713181515,1.59576976411,1.94265920261,1.86171833362,0.429687577398,0.421581742999,0.413776124693,0.429687577398,0.429687577398,0.429687577398,0.429687577398,0.429687577398,0.429687577398,0.429687577398,0.421581742999);

modeFreqs=par(i,nModes,ba.take(i+1, modeFrequencies));
modeGains=par(i,nModes,ba.take(i+1, massEigenValues));
modeT60 = par(i,nModes,ba.take(i+1,t60));

cabinetKrankIgorBass=modalModel(nModes,modeFrequencies,modeT60,modeGains);

modalModel(n,modeFreqs,modeRes,modeGains) = _ <: par(i,n,gain(i)*pm.modeFilter(freqs(i),res(i))) :> _
with {
	freqs(i) = ba.take(i+1,modeFreqs);
	res(i) = ba.take(i+1,modeRes);
	gain(i) = ba.take(i+1,modeGains);
};


cab = cabinetKrankIgorBass;

wetdry = vslider("[2] amount[style:knob]",  1, 0, 1, 0.01);
dry = 1 - wetdry;

process = _ <: _*dry, (_*wetdry:cab) :> _;
