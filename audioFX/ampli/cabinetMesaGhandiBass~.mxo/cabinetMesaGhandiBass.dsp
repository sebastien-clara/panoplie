declare name "cabinetMesaGhandiBass";
declare description "Generated by tools/physicalModeling/ir2dsp.py";

import("stdfaust.lib");

pi = 4*atan(1.0);
nModes = 23;

modeFrequencies=(158.918918919,635.675675676,953.513513514,1191.89189189,1350.81081081,1589.18918919,2224.86486486,2463.24324324,2781.08108108,3178.37837838,3337.2972973,3814.05405405,4449.72972973,4608.64864865,5005.94594595,5403.24324324,5880.0,6595.13513514,6912.97297297,8899.45945946,9296.75675676,10965.4054054,11918.9189189);
massEigenValues=(1.0,0.392656781741,0.179698264984,0.16272865923,0.159858764562,0.385698217173,0.423967154107,0.346161950402,0.227094155569,0.447609425077,0.440784764765,0.354954511744,0.129041093615,0.0883058328048,0.160879116756,0.0492903135974,0.0619921982738,0.032771899832,0.0170549644327,0.0103629048452,0.0119384482167,0.02242546121,0.0118962229927);
t60=(87.3864656679,58.2576698922,6.24196315368,4.85487764072,4.85487764072,58.2576698922,24.9676175793,19.4192755274,12.4838479621,24.9676175793,24.9676175793,14.5644762318,8.73871707706,1.32411451775,34.9546332734,1.12041664549,19.4192755274,34.9546332734,0.971038205904,14.5644762318,19.4192755274,21.8466751751,29.1288741184);

modeFreqs=par(i,nModes,ba.take(i+1, modeFrequencies));
modeGains=par(i,nModes,ba.take(i+1, massEigenValues));
modeT60 = par(i,nModes,ba.take(i+1,t60));

cabinetMesaGhandiBass=modalModel(nModes,modeFrequencies,modeT60,modeGains);

modalModel(n,modeFreqs,modeRes,modeGains) = _ <: par(i,n,gain(i)*pm.modeFilter(freqs(i),res(i))) :> _
with {
	freqs(i) = ba.take(i+1,modeFreqs);
	res(i) = ba.take(i+1,modeRes);
	gain(i) = ba.take(i+1,modeGains);
};


cab = cabinetMesaGhandiBass;

wetdry = vslider("[2] amount[style:knob]",  1, 0, 1, 0.01);
dry = 1 - wetdry;

process = _ <: _*dry, (_*wetdry:cab) :> _;
