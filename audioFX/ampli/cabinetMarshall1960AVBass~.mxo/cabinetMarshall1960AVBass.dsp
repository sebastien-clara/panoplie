declare name "cabinetMarshall1960AVBass";
declare description "Generated by tools/physicalModeling/ir2dsp.py";

import("stdfaust.lib");

pi = 4*atan(1.0);
nModes = 175;

modeFrequencies=(72.2131250787,122.206827056,161.090817483,183.310240584,222.194231011,338.846202292,477.717596675,583.259856405,627.698702607,711.021539237,766.57009699,888.776924046,1027.64831843,1133.19057816,1188.73913591,1210.95855901,1333.16538607,1422.04307847,1477.59163623,1533.14019398,1583.13389596,1655.34702104,1705.34072301,1810.88298274,1860.87668472,1944.19952135,1988.63836755,2021.9675022,2138.61947349,2171.94860814,2216.38745434,2310.82000252,2333.03942562,2466.35596423,2588.56279128,2699.65990679,2755.20846454,2877.4152916,3032.95125331,3094.05466683,3177.37750346,3305.1391863,3466.23000378,3549.55284041,3632.87567704,3743.97279254,3799.5213503,3860.62476382,3949.50245623,4055.04471596,4093.92870639,4177.25154302,4260.57437964,4321.67779317,4454.99433178,4588.31087039,4627.19486081,4727.18226477,4760.51139942,4910.49250535,4954.93135156,5016.03476508,5093.80274594,5243.78385187,5282.6678423,5354.88096738,5393.7649578,5443.75865978,5499.30721753,5582.63005416,5721.50144855,5843.7082756,5893.70197758,5949.25053533,6010.35394886,6143.67048747,6276.98702607,6410.30356468,6443.63269933,6560.28467061,6732.48519965,6871.35659403,6932.46000756,6965.78914221,6993.56342109,7082.44111349,7215.7576521,7365.73875803,7449.06159466,7499.05529664,7593.48784482,7632.37183524,7676.81068145,7754.5786623,7854.56606626,7882.34034513,7948.99861444,7982.32774909,8082.31515304,8198.96712432,8232.29625897,8310.06423983,8376.72250913,8404.49678801,8482.26476886,8543.36818239,8654.4652979,8715.56871142,8726.67842298,8798.89154805,8865.54981736,8926.65323089,9004.42121174,9071.07948104,9104.40861569,9204.39601965,9226.61544275,9371.04169291,9448.80967376,9504.35823152,9515.46794307,9593.23592392,9626.56505857,9665.449049,9726.55246253,9765.43645295,9815.43015493,9854.31414536,9915.41755889,9959.85640509,9987.63068397,10076.5083764,10109.837511,10215.3797708,10270.9283285,10354.2511651,10365.3608767,10426.4642902,10459.7934249,10520.8968384,10582.0002519,10693.0973674,10809.7493387,10870.8527522,10943.0658773,11020.8338582,11087.4921275,11326.3509258,11459.6674644,11576.3194357,11704.0811185,11837.3976571,11859.6170802,11948.4947726,12098.4758786,12553.9740521,12609.5226099,12637.2968888,12709.5100139,12898.3751102,13031.6916488,13065.0207835,13076.130495,13092.7950624,13103.9047739,13203.8921779,13220.5567452,13231.6664567,13314.9892934,13431.6412646,13787.1520343,13842.700592,13892.694294,13909.3588613,13931.5782844);
massEigenValues=(0.107068845829,0.363598584061,0.492117230093,0.514774462501,0.539649555147,0.88421168965,1.0,0.628886759755,0.676003465463,0.50411527846,0.770928973914,0.665629766467,0.662193565116,0.458552127009,0.62581601039,0.577898125013,0.375863596579,0.403980952549,0.473328662323,0.702416965899,0.645551746567,0.755868177428,0.462361797513,0.647919551747,0.5647382723,0.499430108351,0.478776776909,0.538729160394,0.655623733429,0.653493833456,0.715941005026,0.65583040561,0.603277000108,0.770435699627,0.692590163968,0.463199154906,0.458350939776,0.422995867317,0.534063550336,0.400608120412,0.533990842616,0.530630801229,0.470768762421,0.222634756115,0.306069777292,0.255037272984,0.282023862857,0.345200976532,0.517733085658,0.420893733969,0.416769113337,0.374278742039,0.348396509069,0.425425472513,0.57896889086,0.399848306675,0.389117919419,0.295604566336,0.299541426223,0.204576111311,0.218453663273,0.165218065366,0.143434176139,0.175343322064,0.147557931908,0.13601894025,0.118206641375,0.15684385775,0.10103350626,0.113989658305,0.0834766100159,0.0725718601964,0.063982134114,0.0657914726055,0.0668072969033,0.0740074407031,0.0508830712193,0.055024365228,0.0541170083958,0.0538170536771,0.0347384946504,0.0322667338596,0.0256847113983,0.029788614064,0.0290590156687,0.039260795566,0.0349634808835,0.0371665474241,0.0212963401253,0.0235848215202,0.020211098577,0.0234878097832,0.0169441437716,0.0205030303722,0.0112249103675,0.0114751456244,0.0112458097137,0.0121560801102,0.0141626346787,0.0222978269427,0.0209133324918,0.0252801015146,0.027822540703,0.0283109283764,0.0241848035147,0.0293557850304,0.0287166596599,0.03138333633,0.031448510418,0.0332867278474,0.0390642938142,0.0361051475697,0.0372285559182,0.0366793710768,0.0356999151892,0.0328707588279,0.0333261090572,0.0302917286568,0.0289994369318,0.028231127367,0.0281784709157,0.0248189298773,0.0228644961199,0.0260576667136,0.0240558713608,0.027897668097,0.0261619318586,0.0287422480954,0.0262267778899,0.0224580532136,0.0213700239488,0.0259400097142,0.0238805657298,0.0326468546094,0.0288665218962,0.0321096109975,0.0320381043392,0.0301195940658,0.0296718889176,0.0236370034427,0.0300299926573,0.03047145931,0.0222018929049,0.0224505556984,0.0189645108778,0.0190859958513,0.0163684054629,0.0183308835251,0.0312025686179,0.0343179703159,0.0299781035886,0.0241449151547,0.0238516122883,0.0196222219142,0.0118877476901,0.0115287242015,0.0100410997776,0.0101306390412,0.0116325143413,0.0112999023193,0.0145586244041,0.0131790643622,0.0132118732608,0.0129412505739,0.0130336693198,0.0181606539688,0.0177955950727,0.01757762275,0.0193174611253,0.0143481033613,0.0108836816475,0.0102422860868,0.0106175800906,0.0107197662603,0.0103013468477);
t60=(0.0125078314263,0.0933457228774,0.0962832767358,0.0994118910513,0.124752072014,0.643132225291,0.763704826809,0.130057335639,0.131454958861,0.0994118910513,1.11080777118,0.939926321566,1.11080777118,0.260036302995,0.814613258605,0.718785622302,0.939926321566,0.0536662059707,0.0605636441966,0.339467897125,0.26568756262,0.359431987757,0.0602656873902,0.488799295711,0.407345805406,0.10450591701,0.0605636441966,0.222224238814,0.21825734818,0.21825734818,0.226338051331,0.21825734818,0.210733934924,0.872794323539,0.814613258605,0.610979531587,0.610979531587,0.678857440537,0.254620512528,0.150918156646,0.254620512528,0.581888999203,0.872794323539,0.0142854929507,0.470002336384,0.0177345641208,0.0336444047217,0.0769212874683,0.290983677212,0.179755174754,0.179755174754,0.0820785284899,0.0769212874683,0.230607102062,0.581888999203,0.083194176575,0.0826325834499,0.0605636441966,0.0608645657491,0.0137299176391,0.0138997864465,0.0134461385025,0.0134024062651,0.381891589759,0.222224238814,0.0125713751808,0.0125204884097,0.230607102062,0.0122357504464,0.610979531587,0.872794323539,0.169773129941,0.128689136067,0.130057335639,0.130057335639,0.24443882647,0.939926321566,0.718785622302,0.678857440537,0.718785622302,1.01824698596,0.349164741141,0.203712082574,0.330295206849,0.210733934924,0.763704826809,0.763704826809,0.718785622302,0.130057335639,0.185199926501,0.128689136067,0.610979531587,0.126037367835,0.814613258605,0.339467897125,0.339467897125,0.339467897125,0.359431987757,0.0222125379598,0.0241296574375,0.0230015552589,0.0366593097966,0.0392387291969,0.0393646464966,0.0364415666244,0.039491376167,0.039491376167,0.0617855680864,0.0617855680864,0.0627349089727,0.131454958861,0.103620937917,0.105406154366,0.103620937917,0.102750832425,0.0627349089727,0.0627349089727,0.0402692629172,0.039491376167,0.0392387291969,0.0392387291969,0.0365501132202,0.0241296574375,0.0366593097966,0.0364415666244,0.0392387291969,0.0367691622093,0.039491376167,0.0368796763845,0.0241296574375,0.0240824056841,0.0779001777853,0.0723743710262,0.177151163056,0.0867310184335,0.174621551698,0.174621551698,0.0986108143979,0.0986108143979,0.0242247212437,0.0986108143979,0.100226100112,0.0241296574375,0.0241296574375,0.0229158616823,0.0229586282329,0.0228308064216,0.0919432065767,0.1328829652,0.167448544174,0.127349440656,0.0994118910513,0.0994118910513,0.0933457228774,0.0779001777853,0.290983677212,0.182436918149,0.182436918149,0.290983677212,0.0886147711953,0.124752072014,0.105406154366,0.105406154366,0.100226100112,0.100226100112,0.185199926501,0.143819813862,0.143819813862,0.210733934924,0.124752072014,0.235040347058,0.226338051331,0.226338051331,0.226338051331,0.226338051331);

modeFreqs=par(i,nModes,ba.take(i+1, modeFrequencies));
modeGains=par(i,nModes,ba.take(i+1, massEigenValues));
modeT60 = par(i,nModes,ba.take(i+1,t60));

cabinetMarshall1960AVBass=modalModel(nModes,modeFrequencies,modeT60,modeGains);

modalModel(n,modeFreqs,modeRes,modeGains) = _ <: par(i,n,gain(i)*pm.modeFilter(freqs(i),res(i))) :> _
with {
	freqs(i) = ba.take(i+1,modeFreqs);
	res(i) = ba.take(i+1,modeRes);
	gain(i) = ba.take(i+1,modeGains);
};


cab = cabinetMarshall1960AVBass;

wetdry = vslider("[2] amount[style:knob]",  1, 0, 1, 0.01);
dry = 1 - wetdry;

process = _ <: _*dry, (_*wetdry:cab) :> _;
