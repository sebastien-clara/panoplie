declare name "cabinetOrangeTangerineTreble";
declare description "Generated by tools/physicalModeling/ir2dsp.py";

import("stdfaust.lib");

pi = 4*atan(1.0);
nModes = 208;

modeFrequencies=(72.2131250787,83.3228366293,122.206827056,161.090817483,227.749086787,249.968509888,355.510769618,438.833606248,499.937019776,577.70500063,666.582693034,833.228366293,949.880337574,1010.9837511,1116.52601083,1160.96485703,1177.62942436,1222.06827056,1338.72024184,1394.2687996,1433.15279002,1505.3659151,1616.46303061,1655.34702104,1755.33442499,1799.77327119,1833.10240584,1899.76067515,1988.63836755,2088.62577151,2271.93601209,2316.37485829,2371.92341605,2444.13654113,2510.79481043,2605.22735861,2660.77591636,2771.87303187,2816.31187807,2916.29928203,2960.73812823,3005.17697443,3105.16437839,3160.71293614,3271.81005164,3316.24889785,3427.34601335,3488.44942688,3610.65625394,3677.31452324,3732.86308099,3760.63735987,3893.95389848,3927.28303313,3982.83159088,4049.48986018,4182.80639879,4232.80010077,4288.34865852,4327.23264895,4382.7812067,4466.10404333,4527.20745686,4577.20115884,4610.53029349,4638.30457236,4716.07255322,4760.51139942,4877.1633707,4988.26048621,5010.47990931,5099.35760171,5171.57072679,5204.89986144,5254.89356342,5338.21640005,5382.65524625,5415.9843809,5477.08779443,5521.52664063,5554.85577529,5599.29462149,5754.8305832,5821.4888525,5871.48255448,5927.03111223,6027.01851619,6088.12192971,6143.67048747,6210.32875677,6232.54817987,6293.6515934,6343.64529538,6393.63899735,6488.07154553,6515.84582441,6621.38808414,6654.71721879,6676.93664189,6749.14976697,6810.2531805,6899.13087291,6943.56971911,7038.00226729,7076.88625772,7210.20279632,7226.86736365,7254.64164252,7337.96447915,7404.62274846,7515.71986396,7587.93298904,7660.14611412,7699.03010455,7782.35294118,7810.12722005,7854.56606626,7876.78548936,7937.88890288,8082.31515304,8115.64428769,8132.30885502,8226.7414032,8254.51568208,8287.84481673,8432.27106688,8471.15505731,8482.26476886,8493.37448041,8576.69731704,8610.02645169,8643.35558635,8732.23327875,8748.89784608,8793.33669228,8810.0012596,8826.66582693,8871.10467313,8915.54351933,8998.86635596,9009.97606751,9098.85375992,9109.96347147,9126.6280388,9159.95717345,9182.17659655,9254.38972163,9321.04799093,9365.48683713,9443.25481799,9515.46794307,9865.42385691,10204.2700592,10226.4894823,10337.5865978,11137.4858294,11159.7052526,12692.8454465,12703.9551581,12726.1745812,12859.4911198,12870.6008313,12887.2653987,13253.8858798,13331.6538607,13342.7635722,13370.5378511,13403.8669858,13492.7446782,13553.8480917,13570.512659,13653.8354957,13670.500063,13681.6097745,13731.6034765,13748.2680438,13814.9263131,13831.5908805,13881.5845824,13892.694294,13903.8040055,13953.7977075,13970.4622748,13981.5719864,14003.7914095,14014.901121,14053.7851115,14125.9982366,14137.1079481,14148.2176597,14170.4370828,14192.6565059,14220.4307847,14253.7599194,14275.9793425,14292.6439098,14309.3084771,14337.082756,14359.3021791,14375.9667464,14403.7410253,14420.4055926,14431.5153042,14459.2895831,14475.9541504,14498.1735735,14509.283285,14520.3929966);
massEigenValues=(0.116355821145,0.140164781129,0.496752840397,0.489665996503,0.55496836189,0.477960032829,0.742701720671,0.523246594292,0.565024101138,0.955063440686,0.991547550453,0.809185949182,0.548547540702,0.410153782625,0.876363767149,0.756109127042,0.751518747107,0.607492069144,0.346927690536,0.401649961551,0.344262885253,0.380267404564,0.572954207091,0.526502549063,0.619221677027,0.532356688248,0.526790999701,0.390075862035,0.533275736066,0.540240472165,0.968717248957,1.0,0.951722945119,0.816932944669,0.665814325501,0.529917445948,0.480327104846,0.416132231993,0.453637940815,0.42801528178,0.429260228415,0.366166055639,0.499976731753,0.532242735586,0.594970180766,0.590742505266,0.496368048385,0.440998744569,0.347733884111,0.28637992513,0.332355244884,0.349192698803,0.427908417523,0.429818276479,0.512678909664,0.557821967779,0.760811484192,0.69531887755,0.678190524935,0.628202167395,0.425398805505,0.431570893239,0.371729158062,0.359296744589,0.352209550881,0.384627141365,0.33869173507,0.387238919566,0.27120527437,0.19628236088,0.218414722008,0.187572093729,0.148606096786,0.159396555548,0.23496677118,0.25973162078,0.169748283761,0.174531114778,0.139717670109,0.126120976147,0.136068795678,0.16371314381,0.170028774909,0.126092997133,0.143356582133,0.156956300949,0.21075684912,0.168606543793,0.176105774112,0.168083843801,0.168922710941,0.135646756085,0.132908618715,0.110439852927,0.0824409863185,0.0817573602872,0.0787384322093,0.0873598743133,0.0907992408331,0.0860145757888,0.104083934311,0.0872564431322,0.0845246845814,0.0580427985729,0.0542178377348,0.0474844817394,0.0473739271712,0.0481368687169,0.0461497142198,0.0433135197402,0.0498154796246,0.0412885164557,0.045409197026,0.041906507138,0.0455271458518,0.0462272769123,0.0421820423424,0.0417854587169,0.0406153095072,0.0186328021396,0.0193087033636,0.0192812631263,0.0101397570107,0.0120794740193,0.01226192255,0.0135011546308,0.0122693932993,0.0121759400974,0.0121463289699,0.0205374025143,0.0227497071538,0.0202452193761,0.0223430028849,0.0220508863786,0.0208457379988,0.0208375594815,0.0208741662591,0.0214640721674,0.020476601156,0.0219534892488,0.022041035876,0.0237056613687,0.0238556042315,0.0235923648211,0.0243940203795,0.0256477982641,0.0260600144926,0.0255442876594,0.0245946797826,0.0170140668125,0.0132216835579,0.0132776332691,0.0119604491859,0.0116970457519,0.0105746006995,0.0119288029449,0.0127369362449,0.0102895465724,0.0102936565549,0.0103942601315,0.0114946101408,0.0114341744434,0.011180796778,0.0111153194009,0.0134163490962,0.0134193813252,0.0128408920679,0.0121589036781,0.0146578427107,0.0135564989901,0.0130353208436,0.0175884571824,0.0178193453294,0.017395285533,0.0189376734226,0.019158840711,0.0191013752652,0.0196254111501,0.0204081228546,0.0202760253891,0.0201929504732,0.018236152508,0.0181335159605,0.0180716449015,0.0167839186609,0.0168994732765,0.0183751736406,0.0155991161178,0.0158002184172,0.0156366697959,0.0148388051609,0.0145065870966,0.0150173565076,0.0144100118284,0.0140241907591,0.01323575937,0.0133151414432,0.0127480460171,0.0119798170413,0.0110639466999,0.010558517027,0.010888185026,0.0109918507829,0.010781117459,0.0109375034192,0.01028081757,0.0102310527747,0.0100662448199);
t60=(0.010702905653,0.0122116053245,0.15875398966,0.15875398966,0.160841826757,0.156719686852,0.610979531587,0.15875398966,0.160841826757,0.421389510608,0.436436337622,0.718785622302,1.35763653188,0.678857440537,0.678857440537,0.407345805406,0.407345805406,0.349164741141,0.230607102062,0.126037367835,0.124752072014,0.126037367835,0.230607102062,0.21825734818,0.421389510608,0.21825734818,0.21825734818,0.126037367835,0.089916776793,0.089916776793,0.235040347058,0.24942577474,0.226338051331,0.167448544174,0.135834178312,0.089916776793,0.0886147711953,0.0420647290407,0.470002336384,0.0423552915822,0.0423552915822,0.0362264002984,0.149078647077,0.214429646696,0.235040347058,0.230607102062,0.149078647077,0.10450591701,0.0362264002984,0.0175827934616,0.0361197692003,0.0362264002984,0.0679562840982,0.0679562840982,0.121048892983,0.126037367835,0.277760708206,0.254620512528,0.172163197002,0.167448544174,0.0679562840982,0.0679562840982,0.0627349089727,0.0624152329582,0.0624152329582,0.0654154009655,0.0617855680864,0.0654154009655,0.0155247775969,0.0149061812837,0.0151438610824,0.0148882084831,0.0122478590812,0.0126098142684,0.394208145712,0.509162668329,0.0126226799186,0.0137912028193,0.0122116053245,0.0107214146707,0.0107492994376,0.488799295711,0.488799295711,0.0107214146707,0.089916776793,0.0970468076064,0.222224238814,0.127349440656,0.1328829652,0.127349440656,0.128689136067,0.0107492994376,0.0107399882935,0.010702905653,0.00981403185458,0.00979081579805,0.00976771020888,0.154736885385,0.162985339515,0.0098295709882,0.174621551698,0.154736885385,0.00982179522543,0.00966884346353,0.00966132183847,0.00863462278035,0.00863462278035,0.00863462278035,0.00862863551674,0.00861668609406,0.00865865592792,0.00861072389992,0.00862265662716,0.00861072389992,0.00862265662716,0.00862863551674,0.00861072389992,0.00861072389992,0.00860477002729,0.00843565082288,0.00843565082288,0.00843565082288,0.00827311055576,0.555443060688,0.555443060688,0.0566433052457,0.0558684437699,0.0558684437699,0.0558684437699,0.0719491006169,0.0732401910273,0.0719491006169,0.0732401910273,0.0732401910273,0.0719491006169,0.0719491006169,0.0719491006169,0.0728047041805,0.0719491006169,0.0732401910273,0.0732401910273,0.0741270006123,0.134342356298,0.0741270006123,0.140515412933,0.143819813862,0.145531021491,0.143819813862,0.140515412933,0.0654154009655,0.05612436132,0.814613258605,0.359431987757,0.349164741141,0.190984975253,0.24942577474,0.394208145712,0.678857440537,0.678857440537,0.678857440537,0.488799295711,0.488799295711,0.470002336384,0.0446697178213,0.0509868168241,0.0509868168241,0.0503583181664,0.0493446106811,0.0715288041324,0.0511998226482,0.0507755786847,0.0769212874683,0.0789043297965,0.0769212874683,0.0962832767358,0.0970468076064,0.0970468076064,0.101053767176,0.116440492457,0.115342736679,0.115342736679,0.0809924340054,0.0789043297965,0.0789043297965,0.075966717416,0.075966717416,0.0933457228774,0.0741270006123,0.0741270006123,0.0741270006123,0.0715288041324,0.0650678637661,0.0715288041324,0.0647240042107,0.05612436132,0.0507755786847,0.0507755786847,0.0497451487566,0.0491467545253,0.0446697178213,0.04402811666,0.0445075677078,0.0446697178213,0.0443465925963,0.0445075677078,0.0361197692003,0.0361197692003,0.035908383214);

modeFreqs=par(i,nModes,ba.take(i+1, modeFrequencies));
modeGains=par(i,nModes,ba.take(i+1, massEigenValues));
modeT60 = par(i,nModes,ba.take(i+1,t60));

cabinetOrangeTangerineTreble=modalModel(nModes,modeFrequencies,modeT60,modeGains);

modalModel(n,modeFreqs,modeRes,modeGains) = _ <: par(i,n,gain(i)*pm.modeFilter(freqs(i),res(i))) :> _
with {
	freqs(i) = ba.take(i+1,modeFreqs);
	res(i) = ba.take(i+1,modeRes);
	gain(i) = ba.take(i+1,modeGains);
};


cab = cabinetOrangeTangerineTreble;

wetdry = vslider("[2] amount[style:knob]",  1, 0, 1, 0.01);
dry = 1 - wetdry;

process = _ <: _*dry, (_*wetdry:cab) :> _;
