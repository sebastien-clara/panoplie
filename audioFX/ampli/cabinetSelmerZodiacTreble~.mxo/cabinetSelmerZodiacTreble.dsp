declare name "cabinetSelmerZodiacTreble";
declare description "Generated by tools/physicalModeling/ir2dsp.py";

import("stdfaust.lib");

pi = 4*atan(1.0);
nModes = 135;

modeFrequencies=(77.767980854,99.9874039552,127.761682832,244.413654113,466.607885124,599.924423731,699.911827686,883.222068271,949.880337574,1105.41629928,1199.84884746,1338.72024184,1483.146492,1572.02418441,1638.68245371,1760.88928077,1783.10870387,1827.54755007,2005.30293488,2194.16803124,2333.03942562,2399.69769492,2471.91082,2583.00793551,2755.20846454,2877.4152916,3032.95125331,3155.15808036,3294.02947474,3427.34601335,3571.77226351,3627.32082126,3716.19851367,3855.06990805,3905.06361003,3982.83159088,4155.03211991,4205.02582189,4282.79380275,4360.5617836,4427.2200529,4488.32346643,4549.42687996,4577.20115884,4638.30457236,4704.96284167,4782.73082252,4916.04736113,4999.37019776,5138.24159214,5266.00327497,5354.88096738,5404.87466935,5504.86207331,5560.41063106,5632.62375614,5665.95289079,5754.8305832,5899.25683335,6038.12822774,6171.44476634,6210.32875677,6304.76130495,6432.52298778,6460.29726666,6565.83952639,6610.27837259,6676.93664189,6738.04005542,6804.69832473,6926.90515178,7043.55712306,7110.21539237,7404.62274846,7432.39702733,7521.27471974,7571.26842172,7676.81068145,8121.19914347,8432.27106688,8482.26476886,8537.81332662,8604.47159592,8643.35558635,8654.4652979,8782.22698073,8887.76924046,9054.41491372,9065.52462527,9098.85375992,9143.29260612,9176.62174077,9215.5057312,9337.71255826,9398.81597178,9471.02909686,9482.13880841,9543.24222194,9632.11991435,9704.33303943,9770.99130873,9859.86900113,9932.08212621,9976.52097241,10004.2952513,10098.7277995,10143.1666457,10248.7089054,10259.818617,10298.7026074,10387.5802998,10437.5740018,10454.2385691,10548.6711173,10570.8905404,10609.7745308,10665.3230886,10681.9876559,10726.4265021,10759.7556367,10893.0721753,11037.4984255,11115.2664063,11187.4795314,11287.4669354,11320.79607,11487.4417433,11659.6422723,11981.8239073,11992.9336188,12070.7015997,12120.6953017,12192.9084268,12237.347273,12670.6260234);
massEigenValues=(0.0531510349204,0.0638763151419,0.0597394941764,0.0361542539822,0.0527545825277,0.217375980404,0.308711560195,0.345796028759,0.350850763454,0.335448916629,0.318960226633,0.38537479472,0.260644723012,0.273560130315,0.206998779545,0.48733974403,0.489207711983,0.446611087964,0.435676512612,0.546018384835,0.875907340258,1.0,0.949813881965,0.900516419889,0.925133010027,0.78746095158,0.729904384064,0.649750496755,0.455310297315,0.648547692834,0.486792296099,0.397194185621,0.544312042232,0.62385298186,0.525604170565,0.402533395818,0.424430742646,0.41703655217,0.356255686093,0.446688374528,0.401144135689,0.355281570621,0.334855399566,0.319469041235,0.360253236035,0.453259275745,0.371318320786,0.242883201204,0.399492672838,0.522103770019,0.510852435415,0.232361180375,0.291887774539,0.17193331471,0.211610974746,0.24338177641,0.231079819607,0.241020581682,0.130166299348,0.15062615528,0.112158092134,0.0944271319694,0.100061269743,0.0706881602954,0.0730598689416,0.0948035728216,0.0904404471813,0.0971141653846,0.0805787449482,0.0791195842472,0.0577420722393,0.0453680763659,0.0333530420079,0.0137033436489,0.0152494140267,0.0159528495937,0.0152569870976,0.0188296907192,0.012599264802,0.0169691379188,0.0196975559332,0.0199193791381,0.0200440573565,0.0178002893921,0.0176310495699,0.0287754398359,0.0308449904739,0.0310606966453,0.0309602502309,0.029474275594,0.0239541833644,0.0272490964202,0.0277670835329,0.0168754181705,0.0157564627831,0.0173947698218,0.0176368784574,0.0201477334593,0.027449190386,0.0318882834731,0.0332981826366,0.0389415107345,0.0334563333175,0.0346440177888,0.0334150083155,0.0281322899787,0.0288327062532,0.0296001529546,0.0295920669994,0.0296622185636,0.0363431680044,0.034072659089,0.0337736524537,0.0409845111342,0.0408684676983,0.039308900535,0.0380946785279,0.0380233578103,0.0359945055428,0.0375859585576,0.0308313402194,0.0274162739984,0.0229056433232,0.0231763778444,0.0223025161727,0.0207157544582,0.0176980054244,0.0101611059294,0.0133217631656,0.0131495915108,0.0133752741651,0.01372604488,0.011885325704,0.012000418943,0.0108106711979);
t60=(0.509162668329,0.555443060688,0.509162668329,1.52733130493,0.046534752481,0.051631226853,0.678857440537,0.339467897125,0.349164741141,0.370321491753,0.359431987757,0.643132225291,0.185199926501,0.190984975253,0.0514146184385,0.814613258605,0.814613258605,0.470002336384,0.678857440537,0.0715288041324,0.123492741768,0.169773129941,0.128689136067,0.124752072014,0.126037367835,0.0986108143979,0.718785622302,0.814613258605,0.0886147711953,0.678857440537,0.0986108143979,0.0855190935915,0.24443882647,0.26568756262,0.110150648586,0.0861207886704,0.130057335639,0.130057335639,0.0412165212447,0.177151163056,0.0843406011682,0.0412165212447,0.0402692629172,0.039747304271,0.0413555012354,0.290983677212,0.0416362975468,0.0194414038552,0.194015238893,0.763704826809,0.678857440537,0.0194107664379,0.0307000246968,0.190984975253,0.207163501523,0.235040347058,0.21825734818,0.226338051331,0.0170244066974,1.01824698596,0.678857440537,0.555443060688,0.718785622302,0.718785622302,0.763704826809,0.214429646696,0.207163501523,0.222224238814,0.185199926501,0.182436918149,0.100226100112,0.0130902417096,0.0130213244336,0.763704826809,0.763704826809,0.581888999203,0.531296769015,0.814613258605,1.22188071348,0.0211077426013,0.0637139167773,0.0732401910273,0.0736809247056,0.0212535256447,0.0212168907181,0.126037367835,0.128689136067,0.128689136067,0.128689136067,0.126037367835,0.119862907549,0.124752072014,0.124752072014,0.0211077426013,0.0209639531812,0.0211803823377,0.0212168907181,0.0324012219143,0.039747304271,0.115342736679,0.115342736679,0.179755174754,0.116440492457,0.118699950961,0.115342736679,0.0405354272667,0.0446697178213,0.0451633482481,0.0451633482481,0.0451633482481,0.114265499704,0.0919432065767,0.0919432065767,0.145531021491,0.145531021491,0.142148401762,0.13891953749,0.137359524421,0.0947917280661,0.137359524421,0.075966717416,0.039747304271,0.034592595112,0.034592595112,0.0343025603945,0.0324869586538,0.0212168907181,0.0195960591962,0.179755174754,0.177151163056,0.182436918149,0.197143252978,0.135834178312,0.137359524421,0.0711133948183);

modeFreqs=par(i,nModes,ba.take(i+1, modeFrequencies));
modeGains=par(i,nModes,ba.take(i+1, massEigenValues));
modeT60 = par(i,nModes,ba.take(i+1,t60));

cabinetSelmerZodiacTreble=modalModel(nModes,modeFrequencies,modeT60,modeGains);

modalModel(n,modeFreqs,modeRes,modeGains) = _ <: par(i,n,gain(i)*pm.modeFilter(freqs(i),res(i))) :> _
with {
	freqs(i) = ba.take(i+1,modeFreqs);
	res(i) = ba.take(i+1,modeRes);
	gain(i) = ba.take(i+1,modeGains);
};


cab = cabinetSelmerZodiacTreble;

wetdry = vslider("[2] amount[style:knob]",  1, 0, 1, 0.01);
dry = 1 - wetdry;

process = _ <: _*dry, (_*wetdry:cab) :> _;
