declare name "cabinetGenzieTreble";
declare description "Generated by tools/physicalModeling/ir2dsp.py";

import("stdfaust.lib");

pi = 4*atan(1.0);
nModes = 92;

modeFrequencies=(118.151373074,383.991962492,649.832551909,708.908238446,797.521768252,915.673141326,1092.90020094,1683.65706631,1919.95981246,2156.26255861,2274.41393168,2599.33020764,2658.40589417,2983.32217013,3042.39785666,3101.4735432,3160.54922974,3219.62491628,3278.70060281,3367.31413262,3426.38981916,3485.46550569,3544.54119223,3603.61687877,3751.30609511,3810.38178165,3869.45746818,3987.60884126,4046.6845278,4194.37374414,4253.44943068,4312.52511721,4460.21433356,4637.44139317,4755.59276624,4814.66845278,4873.74413932,4932.81982585,4991.89551239,5198.66041527,5257.73610181,5316.81178835,5434.96316142,5494.03884796,5582.65237776,5641.7280643,6232.48492967,6291.56061621,6793.70395177,6852.77963831,6911.85532485,7236.7716008,7295.84728734,7413.99866042,7650.30140656,7797.99062291,7916.14199598,8152.44474213,8211.52042867,8300.13395847,8359.20964501,8418.28533155,9009.04219692,9215.8070998,9274.88278634,9333.95847287,9422.57200268,9629.33690556,9717.95043537,10042.8667113,10101.9423979,11460.6831882,11519.7588747,11578.8345613,11637.9102478,11696.9859344,11844.6751507,11903.7508372,13262.4916276,13469.2565305,13676.0214334,13735.0971199,14325.8539853,14739.383791,15861.8218352,15979.9732083,16600.2679169,16659.3436035,16895.6463496,17013.7977227,17250.1004689,17427.3275285);
massEigenValues=(1.0,0.277520685859,0.433871018595,0.340886005537,0.283339089512,0.299127632897,0.412003026561,0.273169930538,0.266166570944,0.402214776489,0.480367274793,0.27154894366,0.288904020747,0.434185478449,0.559430702845,0.656903920447,0.609609384784,0.510814508896,0.383545953119,0.343336104533,0.477565517251,0.486655756982,0.450395632555,0.338674692005,0.253097785253,0.25056942089,0.205314349249,0.328962995601,0.307112504041,0.203249575754,0.148317315192,0.157142960746,0.259023285478,0.239111211144,0.268553505694,0.296607963457,0.285858266554,0.285649410318,0.259374642931,0.21612250893,0.258566884455,0.272904841775,0.337471380063,0.355227808918,0.344703549687,0.326788540873,0.111189074765,0.113824757961,0.060735473016,0.0554881134341,0.0523380904729,0.0755599278041,0.0777717540179,0.0747016344638,0.0651097041026,0.0583814050543,0.0574358109277,0.0490362246746,0.0492702120772,0.0510785517752,0.0517060946303,0.052657274094,0.0570090234636,0.065668608091,0.0637281917154,0.0616522309505,0.0582305194856,0.0499752933195,0.0503436196988,0.0926458100817,0.0919602863879,0.0157439198267,0.015659260874,0.0156777132513,0.0152507459126,0.0153598252577,0.0166510574285,0.0178751273142,0.0808245189888,0.0686361442118,0.0755236412729,0.0755278092662,0.0420598669133,0.0456083296858,0.0181316706424,0.018186530414,0.0142285471913,0.0143395178287,0.0144678355898,0.0151636528995,0.0132545013554,0.0120949612194);
t60=(21.6564502866,4.06064808423,21.6564502866,4.99770263931,2.59884297846,4.33135273348,12.9939015098,10.8282643157,2.95321997377,5.41417133047,6.49698992748,9.28138060562,9.28138060562,4.64072947547,6.49698992748,10.8282643157,8.12121782305,5.41417133047,2.4063418946,2.4063418946,10.8282643157,10.8282643157,8.12121782305,2.32040391073,1.80477600761,1.80477600761,1.38239995945,8.12121782305,7.21886899218,1.38239995945,1.29946066275,1.06514581913,1.2259107204,1.20321012091,1.2259107204,4.33135273348,3.41950549395,3.41950549395,1.2259107204,1.18133499777,1.2259107204,1.24948441987,3.24853413655,3.8217910408,3.60947366885,3.24853413655,0.507649566085,0.511646189812,0.224109787683,0.177105919784,0.176146420858,2.03036321521,2.09585627548,1.91093469354,0.273057830422,0.22257532587,0.177105919784,0.175197266934,0.175197266934,0.175670561255,0.175670561255,0.176146420858,0.177105919784,0.984458889552,0.941659735611,0.941659735611,0.902427177841,0.175670561255,0.175670561255,3.41950549395,3.41950549395,0.0548584122264,0.0548584122264,0.0548584122264,0.0548584122264,0.0548584122264,0.058609114604,0.117563200829,1.58469092706,1.32597866917,1.47664916026,1.47664916026,0.698670990879,0.730068412923,0.117563200829,0.117563200829,0.0547661900163,0.0547661900163,0.0547661900163,0.0548584122264,0.0546742777971,0.0545826740083);

modeFreqs=par(i,nModes,ba.take(i+1, modeFrequencies));
modeGains=par(i,nModes,ba.take(i+1, massEigenValues));
modeT60 = par(i,nModes,ba.take(i+1,t60));

cabinetGenzieTreble=modalModel(nModes,modeFrequencies,modeT60,modeGains);

modalModel(n,modeFreqs,modeRes,modeGains) = _ <: par(i,n,gain(i)*pm.modeFilter(freqs(i),res(i))) :> _
with {
	freqs(i) = ba.take(i+1,modeFreqs);
	res(i) = ba.take(i+1,modeRes);
	gain(i) = ba.take(i+1,modeGains);
};


cab = cabinetGenzieTreble;

wetdry = vslider("[2] amount[style:knob]",  1, 0, 1, 0.01);
dry = 1 - wetdry;

process = _ <: _*dry, (_*wetdry:cab) :> _;
