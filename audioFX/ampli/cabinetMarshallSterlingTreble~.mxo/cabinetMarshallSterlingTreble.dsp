declare name "cabinetMarshallSterlingTreble";
declare description "Generated by tools/physicalModeling/ir2dsp.py";

import("stdfaust.lib");

pi = 4*atan(1.0);
nModes = 57;

modeFrequencies=(143.181818182,429.545454545,644.318181818,823.295454545,1038.06818182,1217.04545455,1431.81818182,1575.0,1718.18181818,1861.36363636,1968.75,2111.93181818,2541.47727273,2648.86363636,2720.45454545,3006.81818182,3150.0,3400.56818182,3651.13636364,3758.52272727,3865.90909091,4223.86363636,4331.25,4402.84090909,4510.22727273,4760.79545455,4868.18181818,5011.36363636,5154.54545455,5297.72727273,5512.5,5584.09090909,5798.86363636,6264.20454545,6371.59090909,6514.77272727,7517.04545455,7696.02272727,8053.97727273,8232.95454545,8805.68181818,8877.27272727,9056.25,9199.43181818,9450.0,10130.1136364,10380.6818182,10881.8181818,11096.5909091,11203.9772727,11740.9090909,11991.4772727,12600.0,12707.3863636,12993.75,13315.9090909,13387.5);
massEigenValues=(1.0,0.271670633576,0.479872001467,0.254653154815,0.215994557473,0.264453381999,0.197084316264,0.176582589724,0.182391652812,0.265016354125,0.308024194455,0.468481333539,0.770059705832,0.772037610266,0.769833104368,0.582980621975,0.57063791118,0.854528016967,0.550916648872,0.476922190428,0.46477223165,0.471461173505,0.428997877534,0.43674279542,0.498961916679,0.480316920541,0.531494539071,0.48648959996,0.504080581188,0.509111935669,0.516782708321,0.513908734554,0.507602888878,0.26974895735,0.265921383544,0.26707158694,0.0102223177985,0.0124542858885,0.0465203009921,0.0415042432671,0.0203487315971,0.0206662423536,0.0217509001059,0.0264520659296,0.0314817970707,0.0363907468372,0.0568873867843,0.0240691716282,0.023942835033,0.0230615285061,0.0418811500669,0.0422126728626,0.0288764055192,0.0285606201016,0.0320142470692,0.0230019914777,0.0224508941584);
t60=(19.6832946448,5.62385443076,19.6832946448,7.87336486494,26.2443667447,13.1222225448,0.483102061792,0.483102061792,0.483102061792,0.574770794948,0.578996474677,1.4315849861,3.74926240237,3.74926240237,3.74926240237,1.67524569058,1.64034637092,9.8416864949,1.48560410454,1.4315849861,1.40602236756,1.381356683,1.31229276623,1.31229276623,1.40602236756,1.40602236756,1.4315849861,1.40602236756,1.40602236756,1.40602236756,1.4315849861,1.4315849861,1.40602236756,0.574770794948,0.574770794948,0.574770794948,11.2476305163,0.44489679673,5.24893602507,3.93672160521,0.47724722896,0.47724722896,0.480156795276,0.486083689623,4.37412641182,3.02826546843,7.87336486494,0.486083689623,0.486083689623,0.483102061792,2.91611038982,2.91611038982,0.629941269521,0.629941269521,1.4580943683,0.483102061792,0.480156795276);

modeFreqs=par(i,nModes,ba.take(i+1, modeFrequencies));
modeGains=par(i,nModes,ba.take(i+1, massEigenValues));
modeT60 = par(i,nModes,ba.take(i+1,t60));

cabinetMarshallSterlingTreble=modalModel(nModes,modeFrequencies,modeT60,modeGains);

modalModel(n,modeFreqs,modeRes,modeGains) = _ <: par(i,n,gain(i)*pm.modeFilter(freqs(i),res(i))) :> _
with {
	freqs(i) = ba.take(i+1,modeFreqs);
	res(i) = ba.take(i+1,modeRes);
	gain(i) = ba.take(i+1,modeGains);
};


cab = cabinetMarshallSterlingTreble;

wetdry = vslider("[2] amount[style:knob]",  1, 0, 1, 0.01);
dry = 1 - wetdry;

process = _ <: _*dry, (_*wetdry:cab) :> _;
