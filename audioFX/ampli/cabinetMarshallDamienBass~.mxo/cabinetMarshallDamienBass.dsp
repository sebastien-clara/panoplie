declare name "cabinetMarshallDamienBass";
declare description "Generated by tools/physicalModeling/ir2dsp.py";

import("stdfaust.lib");

pi = 4*atan(1.0);
nModes = 55;

modeFrequencies=(110.989932886,295.973154362,369.966442953,443.959731544,554.94966443,628.94295302,776.929530201,998.909395973,1109.89932886,1183.89261745,1331.87919463,1479.86577181,1553.8590604,1775.83892617,2108.80872483,2293.79194631,2367.7852349,2441.77852349,2552.76845638,2626.76174497,2700.75503356,2811.74496644,2885.73825503,2996.72818792,3070.72147651,3218.70805369,3292.70134228,3366.69463087,3440.68791946,3662.66778523,3773.65771812,4106.62751678,4217.61744966,4513.59060403,4624.58053691,4698.5738255,4772.56711409,4883.55704698,5031.54362416,5105.53691275,5290.52013423,5364.51342282,5512.5,5586.49328859,5660.48657718,5771.47651007,6141.44295302,6844.37919463,6955.36912752,7066.3590604,7140.35234899,7288.33892617,9767.11409396,9952.09731544,10359.0604027);
massEigenValues=(1.0,0.415584877053,0.378614005973,0.314644033904,0.25983654913,0.245227651471,0.260350928466,0.271394863771,0.206850600573,0.195973524916,0.142382907116,0.199891472282,0.268787915793,0.119616443451,0.454966687298,0.29072448516,0.325142857751,0.309469060195,0.293494832899,0.262808397126,0.225386077984,0.294685793581,0.265543096505,0.23688750615,0.210534794049,0.252973444609,0.233872394098,0.258393248199,0.214337606421,0.314391099249,0.295276640456,0.1143203552,0.109055981534,0.132488765034,0.118901322623,0.0464598144121,0.0718552735008,0.0870316787988,0.092973130258,0.0773871089973,0.0264342330989,0.0104202391373,0.0379680306207,0.0425420311721,0.048929314252,0.0511043431201,0.0117660402151,0.0170153168984,0.0182615356946,0.0151047408305,0.0130175028083,0.0100337265084,0.0193388445866,0.014895562902,0.0110796002699);
t60=(27.1250475636,6.78132064968,6.25968662627,5.42507218882,5.42507218882,27.1250475636,27.1250475636,20.3438052588,13.5625629543,20.3438052588,27.1250475636,10.1719418019,13.5625629543,7.39779722282,20.3438052588,3.87507394789,20.3438052588,9.04173475119,3.87507394789,2.46598463813,1.47962212163,10.1719418019,6.78132064968,1.50702108041,1.47962212163,3.87507394789,1.47962212163,3.87507394789,1.47962212163,10.1719418019,8.1375691106,16.2750598762,16.2750598762,20.3438052588,11.6250651529,4.06882372801,13.5625629543,27.1250475636,20.3438052588,20.3438052588,40.6875321731,4.78683761901,6.25968662627,6.78132064968,10.1719418019,10.1719418019,16.2750598762,6.78132064968,9.04173475119,6.78132064968,6.78132064968,27.1250475636,6.25968662627,4.52090654827,2.54304420974);

modeFreqs=par(i,nModes,ba.take(i+1, modeFrequencies));
modeGains=par(i,nModes,ba.take(i+1, massEigenValues));
modeT60 = par(i,nModes,ba.take(i+1,t60));

cabinetMarshallDamienBass=modalModel(nModes,modeFrequencies,modeT60,modeGains);

modalModel(n,modeFreqs,modeRes,modeGains) = _ <: par(i,n,gain(i)*pm.modeFilter(freqs(i),res(i))) :> _
with {
	freqs(i) = ba.take(i+1,modeFreqs);
	res(i) = ba.take(i+1,modeRes);
	gain(i) = ba.take(i+1,modeGains);
};


cab = cabinetMarshallDamienBass;

wetdry = vslider("[2] amount[style:knob]",  1, 0, 1, 0.01);
dry = 1 - wetdry;

process = _ <: _*dry, (_*wetdry:cab) :> _;
