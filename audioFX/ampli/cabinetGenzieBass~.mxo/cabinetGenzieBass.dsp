declare name "cabinetGenzieBass";
declare description "Generated by tools/physicalModeling/ir2dsp.py";

import("stdfaust.lib");

pi = 4*atan(1.0);
nModes = 117;

modeFrequencies=(42.0400381316,126.120114395,357.340324118,630.600571973,693.660629171,777.740705434,840.800762631,903.860819828,987.940896092,1072.02097235,1492.42135367,1576.50142993,1681.60152526,1870.78169685,1933.84175405,2165.06196378,2249.14204004,2333.2221163,2564.44232602,2606.48236416,2669.54242135,2711.58245949,2774.64251668,2879.74261201,2984.84270734,3047.90276454,3089.94280267,3131.9828408,3258.1029552,3384.22306959,3426.26310772,3510.34318398,3741.56339371,3909.72354623,3972.78360343,4056.86367969,4119.92373689,4288.08388942,4330.12392755,4393.18398475,4456.24404194,4561.34413727,4624.40419447,4666.4442326,4792.564347,4855.62440419,4897.66444233,5002.76453765,5065.82459485,5107.86463298,5233.98474738,5339.08484271,5444.18493804,5528.2650143,5612.34509056,5675.40514776,5717.44518589,5801.52526215,5843.56530029,5906.62535748,6011.72545281,6074.78551001,6116.82554814,6179.88560534,6221.92564347,6390.085796,6453.14585319,6495.18589133,6537.22592946,6726.40610105,6873.54623451,6915.58627264,6957.62631077,7020.68636797,7188.8465205,7251.90657769,7777.40705434,7840.46711153,7882.50714967,8050.66730219,8197.80743565,8429.02764538,8471.06768351,8534.12774071,8639.22783603,8870.44804576,8975.54814109,9080.64823642,9227.78836988,9269.82840801,10026.5490944,10110.6291706,10194.7092469,10299.8093422,10341.8493804,10404.9094376,10467.9694948,10510.0095329,10573.0695901,10615.1096282,10720.2097235,11077.5500477,11224.6901811,11434.8903718,11497.950429,11603.0505243,11687.1306006,11813.250715,11918.3508103,12044.4709247,12990.3717827,13032.4118208,13095.471878,13137.5119161,13179.5519542,13242.6120114,13410.772164);
massEigenValues=(0.0784509942626,1.0,0.259711399792,0.359087620144,0.288818787853,0.227006029338,0.239554454653,0.254200835657,0.206671385484,0.304992193349,0.0628438723042,0.176842140655,0.260026292037,0.246227169998,0.231838143269,0.331418576058,0.443945367762,0.406359542658,0.176617157771,0.220642858816,0.223290566005,0.198840319816,0.164093547658,0.190860991935,0.281309193669,0.3576573923,0.372089038385,0.394199831498,0.346706934514,0.350173482041,0.349668682749,0.352923470718,0.166272638145,0.214965765338,0.222322361381,0.187498852835,0.158023811711,0.158389676352,0.138872375191,0.117016303514,0.125145232385,0.134883260049,0.154428436849,0.154887335178,0.208947490902,0.219764701066,0.215242422052,0.179964916778,0.173654126041,0.164451946046,0.124096974329,0.090558520328,0.0737939688553,0.0864929228678,0.0858098061882,0.0737710511087,0.0676458148,0.056725641532,0.0543302673888,0.0457903466049,0.0343137193799,0.0260743146701,0.0280023966479,0.0250831183396,0.0340086051332,0.0568885943437,0.0561763968972,0.0566825951221,0.0528377805186,0.0334793296921,0.0258031126767,0.0255168888226,0.0252943435656,0.0243677325579,0.0281689864734,0.0289878164673,0.0169392612027,0.0171282678622,0.0175446634713,0.0196109379964,0.0217305103579,0.0135364989545,0.0128830998361,0.0120648223982,0.0104309959564,0.0118338521911,0.0128332463004,0.0108185322378,0.0126390120508,0.0121535687108,0.0291796169249,0.0317810838203,0.0324156969673,0.0258243348366,0.0255404672041,0.0267951178961,0.029114629669,0.0297227671057,0.030068036378,0.0282350217286,0.0258339770543,0.0108207634657,0.0125530579061,0.0139347391287,0.0145079981346,0.0149682188185,0.0144555672576,0.0141862042975,0.014285572265,0.0139099694634,0.0103283527966,0.010278582315,0.0112333967902,0.0117565925907,0.0116363327515,0.0110496062236,0.0113844969111);
t60=(23.1170683179,15.4114049934,2.43344571109,15.4114049934,3.55653834109,2.20169643827,2.31177734285,2.31177734285,1.40110804146,9.24687433409,0.165199714012,15.4114049934,9.24687433409,6.60493262299,6.60493262299,2.43344571109,4.62347633971,3.08234367507,0.379045398808,3.85291000736,3.85291000736,0.98378004773,0.379045398808,0.711370346716,1.24964537188,1.49149705398,1.49149705398,1.54121101087,1.4448902194,1.4448902194,1.4448902194,1.4448902194,0.379045398808,3.08234367507,3.55653834109,0.700593195258,0.281992863794,0.285473289778,0.280284291039,0.272042940112,0.276928531379,0.276928531379,0.280284291039,0.280284291039,1.92649417682,2.20169643827,2.20169643827,1.59435351651,1.4448902194,1.24964537188,0.275280613689,0.248648137558,0.168815509884,0.228959442452,0.228959442452,0.168815509884,0.167592776979,0.164612093569,0.164612093569,0.162874061274,0.161172364152,0.131799100791,0.131799100791,0.131424894185,1.15592784509,2.7197242246,2.7197242246,2.7197242246,2.43344571109,1.15592784509,0.131799100791,0.131799100791,0.131424894185,0.131424894185,0.132175445719,0.132175445719,1.12773639395,1.12773639395,1.21676202914,1.40110804146,1.59435351651,0.0561875800987,0.0561875800987,0.0559165213435,0.0517942454699,0.0520266761299,1.49149705398,0.0517942454699,1.49149705398,1.49149705398,1.02750012324,1.10088739286,1.10088739286,0.963286262337,0.963286262337,0.98378004773,1.02750012324,1.05085061812,1.05085061812,0.98378004773,0.963286262337,0.379045398808,0.391891739266,0.395240571609,0.840696164305,0.90662697332,0.840696164305,0.398647142442,0.398647142442,0.395240571609,1.4448902194,1.4448902194,2.31177734285,2.43344571109,2.31177734285,2.31177734285,4.62347633971);

modeFreqs=par(i,nModes,ba.take(i+1, modeFrequencies));
modeGains=par(i,nModes,ba.take(i+1, massEigenValues));
modeT60 = par(i,nModes,ba.take(i+1,t60));

cabinetGenzieBass=modalModel(nModes,modeFrequencies,modeT60,modeGains);

modalModel(n,modeFreqs,modeRes,modeGains) = _ <: par(i,n,gain(i)*pm.modeFilter(freqs(i),res(i))) :> _
with {
	freqs(i) = ba.take(i+1,modeFreqs);
	res(i) = ba.take(i+1,modeRes);
	gain(i) = ba.take(i+1,modeGains);
};


cab = cabinetGenzieBass;

wetdry = vslider("[2] amount[style:knob]",  1, 0, 1, 0.01);
dry = 1 - wetdry;

process = _ <: _*dry, (_*wetdry:cab) :> _;
